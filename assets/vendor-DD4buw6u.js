import{g as ts}from"./react-core-gSd2dSvh.js";var nn,Or;function Yo(){if(Or)return nn;Or=1;var e=function(t,n,r,i,s,o,a,l){if(!t){var c;if(n===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,i,s,o,a,l],p=0;c=new Error(n.replace(/%s/g,function(){return u[p++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}};return nn=e,nn}var Xo=Yo();const fv=ts(Xo);var rn,Ar;function Jo(){return Ar||(Ar=1,rn=function(t,n,r,i){var s=r?r.call(i,t,n):void 0;if(s!==void 0)return!!s;if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var o=Object.keys(t),a=Object.keys(n);if(o.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),c=0;c<o.length;c++){var u=o[c];if(!l(u))return!1;var p=t[u],h=n[u];if(s=r?r.call(i,p,h,u):void 0,s===!1||s===void 0&&p!==h)return!1}return!0}),rn}var Zo=Jo();const mv=ts(Zo);/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */function E(e){return e==null}function Hn(e){return e!==null&&typeof e=="object"}function yn(e){return e!==null&&typeof e=="object"}function Qo(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function gt(e,t){return Array.from(new Set([...Object.keys(e),...Object.keys(t)])).reduce((r,i)=>{const s=e[i],o=t[i];return yn(s)&&yn(o)?Object.assign(Object.assign({},r),{[i]:gt(s,o)}):Object.assign(Object.assign({},r),{[i]:i in t?o:s})},{})}function zn(e){return Hn(e)?"target"in e:!1}const ta={alreadydisposed:()=>"View has been already disposed",invalidparams:e=>`Invalid parameters for '${e.name}'`,nomatchingcontroller:e=>`No matching controller for '${e.key}'`,nomatchingview:e=>`No matching view for '${JSON.stringify(e.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:e=>`Not compatible with  plugin '${e.id}'`,propertynotfound:e=>`Property '${e.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class P{static alreadyDisposed(){return new P({type:"alreadydisposed"})}static notBindable(){return new P({type:"notbindable"})}static notCompatible(t,n){return new P({type:"notcompatible",context:{id:`${t}.${n}`}})}static propertyNotFound(t){return new P({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new P({type:"shouldneverhappen"})}constructor(t){var n;this.message=(n=ta[t.type](t.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}toString(){return this.message}}class Re{constructor(t,n){this.obj_=t,this.key=n}static isBindable(t){return!(t===null||typeof t!="object"&&typeof t!="function")}read(){return this.obj_[this.key]}write(t){this.obj_[this.key]=t}writeProperty(t,n){const r=this.read();if(!Re.isBindable(r))throw P.notBindable();if(!(t in r))throw P.propertyNotFound(t);r[t]=n}}class k{constructor(){this.observers_={}}on(t,n,r){var i;let s=this.observers_[t];return s||(s=this.observers_[t]=[]),s.push({handler:n,key:(i=r?.key)!==null&&i!==void 0?i:n}),this}off(t,n){const r=this.observers_[t];return r&&(this.observers_[t]=r.filter(i=>i.key!==n)),this}emit(t,n){const r=this.observers_[t];r&&r.forEach(i=>{i.handler(n)})}}class ea{constructor(t,n){var r;this.constraint_=n?.constraint,this.equals_=(r=n?.equals)!==null&&r!==void 0?r:((i,s)=>i===s),this.emitter=new k,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,n){const r=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(t):t,s=this.rawValue_;this.equals_(s,i)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:r,previousRawValue:s,rawValue:i,sender:this}))}}class na{constructor(t){this.emitter=new k,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,n){const r=n??{forceEmit:!1,last:!0},i=this.value_;i===t&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:this.value_,sender:this}))}}class ra{constructor(t){this.emitter=new k,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function C(e,t){const n=t?.constraint,r=t?.equals;return!n&&!r?new na(e):new ea(e,t)}function ia(e){return[new ra(e),(t,n)=>{e.setRawValue(t,n)}]}class v{constructor(t){this.emitter=new k,this.valMap_=t;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(t){return Object.keys(t).reduce((r,i)=>Object.assign(r,{[i]:C(t[i])}),{})}static fromObject(t){const n=this.createCore(t);return new v(n)}get(t){return this.valMap_[t].rawValue}set(t,n){this.valMap_[t].rawValue=n}value(t){return this.valMap_[t]}}class le{constructor(t){this.values=v.fromObject({max:t.max,min:t.min})}constrain(t){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(t,r),n)}}class sa{constructor(t){this.values=v.fromObject({max:t.max,min:t.min})}constrain(t){const n=this.values.get("max"),r=this.values.get("min");let i=t;return E(r)||(i=Math.max(i,r)),E(n)||(i=Math.min(i,n)),i}}class oa{constructor(t,n=0){this.step=t,this.origin=n}constrain(t){const n=this.origin%this.step,r=Math.round((t-n)/this.step);return n+r*this.step}}class aa{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const la={"**":(e,t)=>Math.pow(e,t),"*":(e,t)=>e*t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t,"&":(e,t)=>e&t,"^":(e,t)=>e^t,"|":(e,t)=>e|t};class ca{constructor(t,n,r){this.left=n,this.operator=t,this.right=r}evaluate(){const t=la[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const ua={"+":e=>e,"-":e=>-e,"~":e=>~e};class pa{constructor(t,n){this.operator=t,this.expression=n}evaluate(){const t=ua[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Kn(e){return(t,n)=>{for(let r=0;r<e.length;r++){const i=e[r](t,n);if(i!=="")return i}return""}}function Qt(e,t){var n;const r=e.substr(t).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function da(e,t){const n=e.substr(t,1);return n.match(/^[1-9]$/)?n:""}function te(e,t){var n;const r=e.substr(t).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function ha(e,t){const n=te(e,t);if(n!=="")return n;const r=e.substr(t,1);if(t+=1,r!=="-"&&r!=="+")return"";const i=te(e,t);return i===""?"":r+i}function qn(e,t){const n=e.substr(t,1);if(t+=1,n.toLowerCase()!=="e")return"";const r=ha(e,t);return r===""?"":n+r}function es(e,t){const n=e.substr(t,1);if(n==="0")return n;const r=da(e,t);return t+=r.length,r===""?"":r+te(e,t)}function fa(e,t){const n=es(e,t);if(t+=n.length,n==="")return"";const r=e.substr(t,1);if(t+=r.length,r!==".")return"";const i=te(e,t);return t+=i.length,n+r+i+qn(e,t)}function ma(e,t){const n=e.substr(t,1);if(t+=n.length,n!==".")return"";const r=te(e,t);return t+=r.length,r===""?"":n+r+qn(e,t)}function va(e,t){const n=es(e,t);return t+=n.length,n===""?"":n+qn(e,t)}const _a=Kn([fa,ma,va]);function ba(e,t){var n;const r=e.substr(t).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function ga(e,t){const n=e.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0b")return"";const r=ba(e,t);return r===""?"":n+r}function wa(e,t){var n;const r=e.substr(t).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function ya(e,t){const n=e.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0o")return"";const r=wa(e,t);return r===""?"":n+r}function Ea(e,t){var n;const r=e.substr(t).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function Ca(e,t){const n=e.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0x")return"";const r=Ea(e,t);return r===""?"":n+r}const xa=Kn([ga,ya,Ca]),Pa=Kn([xa,_a]);function Sa(e,t){const n=Pa(e,t);return t+=n.length,n===""?null:{evaluable:new aa(n),cursor:t}}function ka(e,t){const n=e.substr(t,1);if(t+=n.length,n!=="(")return null;const r=rs(e,t);if(!r)return null;t=r.cursor,t+=Qt(e,t).length;const i=e.substr(t,1);return t+=i.length,i!==")"?null:{evaluable:r.evaluable,cursor:t}}function Ta(e,t){var n;return(n=Sa(e,t))!==null&&n!==void 0?n:ka(e,t)}function ns(e,t){const n=Ta(e,t);if(n)return n;const r=e.substr(t,1);if(t+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const i=ns(e,t);return i?(t=i.cursor,{cursor:t,evaluable:new pa(r,i.evaluable)}):null}function Ia(e,t,n){n+=Qt(t,n).length;const r=e.filter(i=>t.startsWith(i,n))[0];return r?(n+=r.length,n+=Qt(t,n).length,{cursor:n,operator:r}):null}function Va(e,t){return(n,r)=>{const i=e(n,r);if(!i)return null;r=i.cursor;let s=i.evaluable;for(;;){const o=Ia(t,n,r);if(!o)break;r=o.cursor;const a=e(n,r);if(!a)return null;r=a.cursor,s=new ca(o.operator,s,a.evaluable)}return s?{cursor:r,evaluable:s}:null}}const Oa=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((e,t)=>Va(e,t),ns);function rs(e,t){return t+=Qt(e,t).length,Oa(e,t)}function Aa(e){const t=rs(e,0);return!t||t.cursor+Qt(e,t.cursor).length!==e.length?null:t.evaluable}function Q(e){var t;const n=Aa(e);return(t=n?.evaluate())!==null&&t!==void 0?t:null}function is(e){if(typeof e=="number")return e;if(typeof e=="string"){const t=Q(e);if(!E(t))return t}return 0}function Ra(e){return String(e)}function L(e){return t=>t.toFixed(Math.max(Math.min(e,20),0))}function g(e,t,n,r,i){const s=(e-t)/(n-t);return r+s*(i-r)}function Rr(e){return String(e.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function T(e,t,n){return Math.min(Math.max(e,t),n)}function ss(e,t){return(e%t+t)%t}function La(e,t){return E(e.step)?Math.max(Rr(t),2):Rr(e.step)}function os(e){var t;return(t=e.step)!==null&&t!==void 0?t:1}function as(e,t){var n;const r=Math.abs((n=e.step)!==null&&n!==void 0?n:t);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function ls(e,t){return E(e.step)?null:new oa(e.step,t)}function cs(e){return!E(e.max)&&!E(e.min)?new le({max:e.max,min:e.min}):!E(e.max)||!E(e.min)?new sa({max:e.max,min:e.min}):null}function us(e,t){var n,r,i;return{formatter:(n=e.format)!==null&&n!==void 0?n:L(La(e,t)),keyScale:(r=e.keyScale)!==null&&r!==void 0?r:os(e),pointerScale:(i=e.pointerScale)!==null&&i!==void 0?i:as(e,t)}}function ps(e){return{format:e.optional.function,keyScale:e.optional.number,max:e.optional.number,min:e.optional.number,pointerScale:e.optional.number,step:e.optional.number}}function Gn(e){return{constraint:e.constraint,textProps:v.fromObject(us(e.params,e.initialValue))}}class xt{constructor(t){this.controller=t}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(t){this.controller.viewProps.set("disabled",t)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(t){this.controller.viewProps.set("hidden",t)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(t){return this.controller.importState(t)}exportState(){return this.controller.exportState()}}class $e{constructor(t){this.target=t}}class ce extends $e{constructor(t,n,r){super(t),this.value=n,this.last=r??!0}}class Da extends $e{constructor(t,n){super(t),this.expanded=n}}class Ma extends $e{constructor(t,n){super(t),this.index=n}}class Na extends $e{constructor(t,n){super(t),this.native=n}}class ee extends xt{constructor(t){super(t),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new k,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(t){this.controller.tag=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}refresh(){this.controller.value.fetch()}onValueChange_(t){const n=this.controller.value;this.emitter_.emit("change",new ce(this,n.binding.target.read(),t.options.last))}}class Ba{constructor(t,n){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new k}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,n){this.value_.setRawValue(t,n)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function ja(e){if(!("binding"in e))return!1;const t=e.binding;return zn(t)&&"read"in t&&"write"in t}function Fa(e,t){const r=Object.keys(t).reduce((i,s)=>{if(i===void 0)return;const o=t[s],a=o(e[s]);return a.succeeded?Object.assign(Object.assign({},i),{[s]:a.value}):void 0},{});return r}function $a(e,t){return e.reduce((n,r)=>{if(n===void 0)return;const i=t(r);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function Ua(e){return e===null?!1:typeof e=="object"}function G(e){return t=>n=>{if(!t&&n===void 0)return{succeeded:!1,value:void 0};if(t&&n===void 0)return{succeeded:!0,value:void 0};const r=e(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function Lr(e){return{custom:t=>G(t)(e),boolean:G(t=>typeof t=="boolean"?t:void 0)(e),number:G(t=>typeof t=="number"?t:void 0)(e),string:G(t=>typeof t=="string"?t:void 0)(e),function:G(t=>typeof t=="function"?t:void 0)(e),constant:t=>G(n=>n===t?t:void 0)(e),raw:G(t=>t)(e),object:t=>G(n=>{if(Ua(n))return Fa(n,t)})(e),array:t=>G(n=>{if(Array.isArray(n))return $a(n,t)})(e)}}const En={optional:Lr(!0),required:Lr(!1)};function x(e,t){const n=t(En),r=En.required.object(n)(e);return r.succeeded?r.value:void 0}function N(e,t,n,r){if(t&&!t(e))return!1;const i=x(e,n);return i?r(i):!1}function B(e,t){var n;return gt((n=e?.())!==null&&n!==void 0?n:{},t)}function _t(e){return"value"in e}function ds(e){if(!Hn(e)||!("binding"in e))return!1;const t=e.binding;return zn(t)}const z="http://www.w3.org/2000/svg";function Le(e){e.offsetHeight}function Ha(e,t){const n=e.style.transition;e.style.transition="none",t(),e.style.transition=n}function Wn(e){return e.ontouchstart!==void 0}function za(){return globalThis}function Ka(){return za().document}function qa(e){const t=e.ownerDocument.defaultView;return t&&"document"in t?e.getContext("2d",{willReadFrequently:!0}):null}const Ga={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Ue(e,t){const n=e.createElementNS(z,"svg");return n.innerHTML=Ga[t],n}function hs(e,t,n){e.insertBefore(t,e.children[n])}function Yn(e){e.parentElement&&e.parentElement.removeChild(e)}function fs(e){for(;e.children.length>0;)e.removeChild(e.children[0])}function Wa(e){for(;e.childNodes.length>0;)e.removeChild(e.childNodes[0])}function ms(e){return e.relatedTarget?e.relatedTarget:"explicitOriginalTarget"in e?e.explicitOriginalTarget:null}function X(e,t){e.emitter.on("change",n=>{t(n.rawValue)}),t(e.rawValue)}function K(e,t,n){X(e.value(t),n)}const Ya="tp";function _(e){return(n,r)=>[Ya,"-",e,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const Gt=_("lbl");function Xa(e,t){const n=e.createDocumentFragment();return t.split(`
`).map(i=>e.createTextNode(i)).forEach((i,s)=>{s>0&&n.appendChild(e.createElement("br")),n.appendChild(i)}),n}class vs{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Gt()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(Gt("l")),K(n.props,"label",s=>{E(s)?this.element.classList.add(Gt(void 0,"nol")):(this.element.classList.remove(Gt(void 0,"nol")),Wa(r),r.appendChild(Xa(t,s)))}),this.element.appendChild(r),this.labelElement=r;const i=t.createElement("div");i.classList.add(Gt("v")),this.element.appendChild(i),this.valueElement=i}}class _s{constructor(t,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new vs(t,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(t){return N(t,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return B(null,{label:this.props.get("label")})}}function Ja(){return["veryfirst","first","last","verylast"]}const Dr=_(""),Mr={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class He{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{Ja().forEach(r=>{n.classList.remove(Dr(void 0,Mr[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(Dr(void 0,Mr[r]))})}),this.viewProps.handleDispose(()=>{Yn(n)})}get parent(){return this.parent_}set parent(t){this.parent_=t,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(t){return N(t,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return B(null,Object.assign({},this.viewProps.exportState()))}}class wt extends He{constructor(t,n){if(n.value!==n.valueController.value)throw P.shouldNeverHappen();const r=n.valueController.viewProps,i=new _s(t,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new vs(t,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(t){return N(t,n=>{var r,i,s;return super.importState(n)&&this.labelController.importProps(n)&&((s=(i=(r=this.valueController).importProps)===null||i===void 0?void 0:i.call(r,t))!==null&&s!==void 0?s:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var t,n,r;return B(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(t=this.valueController).exportProps)===null||n===void 0?void 0:n.call(t))!==null&&r!==void 0?r:{}))}}function Nr(e){const t=Object.assign({},e);return delete t.value,t}class bs extends wt{constructor(t,n){super(t,n),this.tag=n.tag}importState(t){return N(t,n=>super.importState(Nr(t)),n=>({tag:n.optional.string}),n=>(this.tag=n.tag,!0))}exportState(){return B(()=>Nr(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function Za(e){return _t(e)&&ds(e.value)}class Qa extends bs{importState(t){return N(t,n=>super.importState(n),n=>({binding:n.required.object({value:n.required.raw})}),n=>(this.value.binding.inject(n.binding.value),this.value.fetch(),!0))}}function tl(e){return _t(e)&&ja(e.value)}function gs(e,t){for(;e.length<t;)e.push(void 0)}function el(e){const t=[];return gs(t,e),t}function nl(e){const t=e.indexOf(void 0);return t<0?e:e.slice(0,t)}function rl(e,t){const n=[...nl(e),t];return n.length>e.length?n.splice(0,n.length-e.length):gs(n,e.length),n}class il{constructor(t){this.emitter=new k,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=t.binding,this.value_=C(el(t.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,n){this.value_.setRawValue(t,n)}fetch(){this.value_.rawValue=rl(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function sl(e){if(!("binding"in e))return!1;const t=e.binding;return zn(t)&&"read"in t&&!("write"in t)}class ol extends bs{exportState(){return B(()=>super.exportState(),{binding:{readonly:!0}})}}function al(e){return _t(e)&&sl(e.value)}class ll extends xt{get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get title(){var t;return(t=this.controller.buttonController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.buttonController.props.set("title",t)}on(t,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(t,s=>{r(new Na(this,s.nativeEvent))}),this}off(t,n){return this.controller.buttonController.emitter.off(t,n),this}}function cl(e,t,n){n?e.classList.add(t):e.classList.remove(t)}function Bt(e,t){return n=>{cl(e,t,n)}}function Xn(e,t){X(e,n=>{t.textContent=n??""})}const sn=_("btn");class ul{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(sn()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("button");r.classList.add(sn("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=t.createElement("div");i.classList.add(sn("t")),Xn(n.props.value("title"),i),this.buttonElement.appendChild(i)}}class pl{constructor(t,n){this.emitter=new k,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new ul(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(t){return N(t,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return B(null,{title:this.props.get("title")})}onClick_(t){this.emitter.emit("click",{nativeEvent:t,sender:this})}}class Br extends He{constructor(t,n){const r=new pl(t,{props:n.buttonProps,viewProps:n.viewProps}),i=new _s(t,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=i}importState(t){return N(t,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return B(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class ws{constructor(t){const[n,r]=t.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=r??null}toString(){const t=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[t,this.prerelease].join("-"):t}}const jt=new ws("2.0.5");function A(e){return Object.assign({core:jt},e)}const dl=A({id:"button",type:"blade",accept(e){const t=x(e,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return t?{params:t}:null},controller(e){return new Br(e.document,{blade:e.blade,buttonProps:v.fromObject({title:e.params.title}),labelProps:v.fromObject({label:e.params.label}),viewProps:e.viewProps})},api(e){return e.controller instanceof Br?new ll(e.controller):null}});function hl(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"button"}))}function fl(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"folder"}))}function ml(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"tab"}))}function vl(e){return Hn(e)?"refresh"in e&&typeof e.refresh=="function":!1}function _l(e,t){if(!Re.isBindable(e))throw P.notBindable();return new Re(e,t)}class bl{constructor(t,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=t,this.emitter_=new k,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(t=>this.pool_.createApi(t))}addBinding(t,n,r){const i=r??{},s=this.controller_.element.ownerDocument,o=this.pool_.createBinding(s,_l(t,n),i),a=this.pool_.createBindingApi(o);return this.add(a,i.index)}addFolder(t){return fl(this,t)}addButton(t){return hl(this,t)}addTab(t){return ml(this,t)}add(t,n){const r=t.controller;return this.controller_.rack.add(r,n),t}remove(t){this.controller_.rack.remove(t.controller)}addBlade(t){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,t),i=this.pool_.createApi(r);return this.add(i,t.index)}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}refresh(){this.children.forEach(t=>{vl(t)&&t.refresh()})}onRackValueChange_(t){const n=t.bladeController,r=this.pool_.createApi(n),i=ds(n.value)?n.value.binding:null;this.emitter_.emit("change",new ce(r,i?i.target.read():n.value.rawValue,t.options.last))}}class Jn extends xt{constructor(t,n){super(t),this.rackApi_=new bl(t.rackController,n)}refresh(){this.rackApi_.refresh()}}class Zn extends He{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}importState(t){return N(t,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,i)=>r.importState(n.children[i])))}exportState(){return B(()=>super.exportState(),{children:this.rackController.rack.children.map(t=>t.exportState())})}}function Cn(e){return"rackController"in e}class gl{constructor(t){this.emitter=new k,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const n of this.allItems())if(t(n))return n;return null}includes(t){return this.cache_.has(t)}add(t,n){if(this.includes(t))throw P.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,t),this.cache_.add(t);const i=this.extract_(t);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(s=>{this.cache_.add(s)})),this.emitter.emit("add",{index:r,item:t,root:this,target:this})}remove(t){const n=this.items_.indexOf(t);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(t);const r=this.extract_(t);r&&(r.allItems().forEach(i=>{this.cache_.delete(i)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}function wl(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(_t(r)&&r.value===t)return r}return null}function yl(e){return Cn(e)?e.rackController.rack.bcSet_:null}class El{constructor(t){var n,r;this.emitter=new k,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=t.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=t.viewProps,this.bcSet_=new gl(yl),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,n){var r;(r=t.parent)===null||r===void 0||r.remove(t),t.parent=this,this.bcSet_.add(t,n)}remove(t){t.parent=null,this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter(t)}onSetAdd_(t){this.updatePositions_();const n=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,root:n,sender:this}),!n)return;const r=t.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),_t(r))r.value.emitter.on("change",this.onChildValueChange_);else if(Cn(r)){const i=r.rackController.rack;if(i){const s=i.emitter;s.on("layout",this.onRackLayout_),s.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(t){this.updatePositions_();const n=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,root:n,sender:this}),!n)return;const r=t.item;if(_t(r))r.value.emitter.off("change",this.onChildValueChange_);else if(Cn(r)){const i=r.rackController.rack;if(i){const s=i.emitter;s.off("layout",this.onRackLayout_),s.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const t=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=t[0],r=t[t.length-1];this.bcSet_.items.forEach(i=>{const s=[];i===n&&(s.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&s.push("veryfirst")),i===r&&(s.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&s.push("verylast")),i.blade.set("positions",s)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(t){const n=wl(this.find(_t),t.sender);if(!n)throw P.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:t.options,sender:this})}onRackLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(t){this.emitter.emit("valuechange",{bladeController:t.bladeController,options:t.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Qn{constructor(t){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=t.element,this.viewProps=t.viewProps;const n=new El({blade:t.root?void 0:t.blade,viewProps:t.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(t){t.root&&hs(this.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.root&&Yn(t.bladeController.view.element)}}function Ft(){return new v({positions:C([],{equals:Qo})})}class ue extends v{constructor(t){super(t)}static create(t){const n={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=v.createCore(n);return new ue(r)}get styleExpanded(){var t;return(t=this.get("temporaryExpanded"))!==null&&t!==void 0?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!E(t)?`${t}px`:"auto"}bindExpandedClass(t,n){const r=()=>{this.styleExpanded?t.classList.add(n):t.classList.remove(n)};K(this,"expanded",r),K(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Cl(e,t){let n=0;return Ha(t,()=>{e.set("expandedHeight",null),e.set("temporaryExpanded",!0),Le(t),n=t.clientHeight,e.set("temporaryExpanded",null),Le(t)}),n}function jr(e,t){t.style.height=e.styleHeight}function tr(e,t){e.value("expanded").emitter.on("beforechange",()=>{if(e.set("completed",!1),E(e.get("expandedHeight"))){const n=Cl(e,t);n>0&&e.set("expandedHeight",n)}e.set("shouldFixHeight",!0),Le(t)}),e.emitter.on("change",()=>{jr(e,t)}),jr(e,t),t.addEventListener("transitionend",n=>{n.propertyName==="height"&&e.cleanUpTransition()})}class ys extends Jn{constructor(t,n){super(t,n),this.emitter_=new k,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new Da(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(t){this.controller.foldable.set("expanded",t)}get title(){return this.controller.props.get("title")}set title(t){this.controller.props.set("title",t)}get children(){return this.rackApi_.children}addBinding(t,n,r){return this.rackApi_.addBinding(t,n,r)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,n){return this.rackApi_.add(t,n)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}}const Es=_("cnt");class xl{constructor(t,n){var r;this.className_=_((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),Es()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),K(this.foldable_,"completed",Bt(this.element,this.className_(void 0,"cpl")));const i=t.createElement("button");i.classList.add(this.className_("b")),K(n.props,"title",c=>{E(c)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=t.createElement("div");s.classList.add(this.className_("i")),this.element.appendChild(s);const o=t.createElement("div");o.classList.add(this.className_("t")),Xn(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const a=t.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const l=t.createElement("div");l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}}class xn extends Zn{constructor(t,n){var r;const i=ue.create((r=n.expanded)!==null&&r!==void 0?r:!0),s=new xl(t,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Qn({blade:n.blade,element:s.containerElement,root:n.root,viewProps:n.viewProps}),view:s})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,tr(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(t){return N(t,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return B(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const Pl=A({id:"folder",type:"blade",accept(e){const t=x(e,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return t?{params:t}:null},controller(e){return new xn(e.document,{blade:e.blade,expanded:e.params.expanded,props:v.fromObject({title:e.params.title}),viewProps:e.viewProps})},api(e){return e.controller instanceof xn?new ys(e.controller,e.pool):null}}),Sl=_("");function Fr(e,t){return Bt(e,Sl(void 0,t))}class nt extends v{constructor(t){var n;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=ia(C(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var n,r,i;const s=t??{};return new nt(v.createCore({disabled:(n=s.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=s.hidden)!==null&&r!==void 0?r:!1,parent:(i=s.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){X(this.globalDisabled_,Fr(t,"disabled")),K(this,"hidden",Fr(t,"hidden"))}bindDisabled(t){X(this.globalDisabled_,n=>{t.disabled=n})}bindTabIndex(t){X(this.globalDisabled_,n=>{t.tabIndex=n?-1:0})}handleDispose(t){this.value("disposed").emitter.on("change",n=>{n&&t()})}importState(t){this.set("disabled",t.disabled),this.set("hidden",t.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const t=this.get("parent");return(t?t.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var n;const r=t.previousRawValue;r?.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const $r=_("tbp");class kl{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add($r()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add($r("c")),this.element.appendChild(r),this.containerElement=r}}const Wt=_("tbi");class Tl{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Wt()),n.viewProps.bindClassModifiers(this.element),K(n.props,"selected",s=>{s?this.element.classList.add(Wt(void 0,"sel")):this.element.classList.remove(Wt(void 0,"sel"))});const r=t.createElement("button");r.classList.add(Wt("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=t.createElement("div");i.classList.add(Wt("t")),Xn(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class Il{constructor(t,n){this.emitter=new k,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Tl(t,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Pn extends Zn{constructor(t,n){const r=new kl(t,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Qn({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Il(t,{props:n.itemProps,viewProps:nt.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,K(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(t){return N(t,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return B(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class Vl extends Jn{constructor(t,n){super(t,n),this.emitter_=new k,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(t){const n=this.controller.view.element.ownerDocument,r=new Pn(n,{blade:Ft(),itemProps:v.fromObject({selected:!1,title:t.title}),props:v.fromObject({selected:!1}),viewProps:nt.create()}),i=this.pool_.createApi(r);return this.rackApi_.add(i,t.index)}removePage(t){this.rackApi_.remove(this.rackApi_.children[t])}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}onSelect_(t){this.emitter_.emit("select",new Ma(this,t.rawValue))}}class Ol extends Jn{get title(){var t;return(t=this.controller.itemController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.itemController.props.set("title",t)}get selected(){return this.controller.props.get("selected")}set selected(t){this.controller.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,n){this.rackApi_.add(t,n)}remove(t){this.rackApi_.remove(t)}addBinding(t,n,r){return this.rackApi_.addBinding(t,n,r)}addBlade(t){return this.rackApi_.addBlade(t)}}const Ur=-1;class Al{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=C(!0),this.selectedIndex=C(Ur),this.items_=[]}add(t,n){const r=n??this.items_.length;this.items_.splice(r,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(t){const n=this.items_.indexOf(t);n<0||(this.items_.splice(n,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Ur,this.empty.rawValue=!0;return}const t=this.items_.findIndex(n=>n.rawValue);t<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===t}),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}onItemSelectedChange_(t){if(t.rawValue){const n=this.items_.findIndex(r=>r===t.sender);this.items_.forEach((r,i)=>{r.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const Yt=_("tab");class Rl{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Yt(),Es()),n.viewProps.bindClassModifiers(this.element),X(n.empty,Bt(this.element,Yt(void 0,"nop")));const r=t.createElement("div");r.classList.add(Yt("t")),this.element.appendChild(r),this.itemsElement=r;const i=t.createElement("div");i.classList.add(Yt("i")),this.element.appendChild(i);const s=t.createElement("div");s.classList.add(Yt("c")),this.element.appendChild(s),this.contentsElement=s}}class Hr extends Zn{constructor(t,n){const r=new Al,i=new Rl(t,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new Qn({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const s=this.rackController.rack;s.emitter.on("add",this.onRackAdd_),s.emitter.on("remove",this.onRackRemove_),this.tab=r}add(t,n){this.rackController.rack.add(t,n)}remove(t){this.rackController.rack.remove(this.rackController.rack.children[t])}onRackAdd_(t){if(!t.root)return;const n=t.bladeController;hs(this.view.itemsElement,n.itemController.view.element,t.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(t){if(!t.root)return;const n=t.bladeController;Yn(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}const Cs=A({id:"tab",type:"blade",accept(e){const t=x(e,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!t||t.pages.length===0?null:{params:t}},controller(e){const t=new Hr(e.document,{blade:e.blade,viewProps:e.viewProps});return e.params.pages.forEach(n=>{const r=new Pn(e.document,{blade:Ft(),itemProps:v.fromObject({selected:!1,title:n.title}),props:v.fromObject({selected:!1}),viewProps:nt.create()});t.add(r)}),t},api(e){return e.controller instanceof Hr?new Vl(e.controller,e.pool):e.controller instanceof Pn?new Ol(e.controller,e.pool):null}});function Ll(e,t){const n=e.accept(t.params);if(!n)return null;const r=x(t.params,i=>({disabled:i.optional.boolean,hidden:i.optional.boolean}));return e.controller({blade:Ft(),document:t.document,params:Object.assign(Object.assign({},n.params),{disabled:r?.disabled,hidden:r?.hidden}),viewProps:nt.create({disabled:r?.disabled,hidden:r?.hidden})})}class er extends ee{get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}}class Dl{constructor(){this.disabled=!1,this.emitter=new k}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Ml{constructor(t,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new k,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class pe{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce((n,r)=>r.constrain(n),t)}}function De(e,t){if(e instanceof t)return e;if(e instanceof pe){const n=e.constraints.reduce((r,i)=>r||(i instanceof t?i:null),null);if(n)return n}return null}class de{constructor(t){this.values=v.fromObject({options:t})}constrain(t){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===t).length>0?t:n[0].value}}function he(e){var t;const n=En;if(Array.isArray(e))return(t=x({items:e},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||t===void 0?void 0:t.items;if(typeof e=="object")return n.required.raw(e).value}function nr(e){if(Array.isArray(e))return e;const t=[];return Object.keys(e).forEach(n=>{t.push({text:n,value:e[n]})}),t}function rr(e){return E(e)?null:new de(nr(e))}const on=_("lst");class Nl{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=t.createElement("div"),this.element.classList.add(on()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("select");r.classList.add(on("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const i=t.createElement("div");i.classList.add(on("m")),i.appendChild(Ue(t,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,K(this.props_,"options",s=>{fs(this.selectElement),s.forEach(o=>{const a=t.createElement("option");a.textContent=o.text,this.selectElement.appendChild(a)}),this.update_()})}update_(){const t=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=t.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class ut{constructor(t,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Nl(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const n=t.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(t){return N(t,null,n=>({options:n.required.custom(he)}),n=>(this.props.set("options",nr(n.options)),!0))}exportProps(){return B(null,{options:this.props.get("options")})}}const zr=_("pop");class Bl{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(zr()),n.viewProps.bindClassModifiers(this.element),X(n.shows,Bt(this.element,zr(void 0,"v")))}}class xs{constructor(t,n){this.shows=C(!1),this.viewProps=n.viewProps,this.view=new Bl(t,{shows:this.shows,viewProps:this.viewProps})}}const Kr=_("txt");class jl{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Kr()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=t.createElement("input");r.classList.add(Kr("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class ne{constructor(t,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new jl(t,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const r=t.currentTarget.value,i=this.parser_(r);E(i)||(this.value.rawValue=i),this.view.refresh()}}function Fl(e){return String(e)}function Ps(e){return e==="false"?!1:!!e}function qr(e){return Fl(e)}function $l(e){return t=>e.reduce((n,r)=>n!==null?n:r(t),null)}const Ul=L(0);function Me(e){return Ul(e)+"%"}function Ss(e){return String(e)}function Sn(e){return e}function $t({primary:e,secondary:t,forward:n,backward:r}){let i=!1;function s(o){i||(i=!0,o(),i=!1)}e.emitter.on("change",o=>{s(()=>{t.setRawValue(n(e.rawValue,t.rawValue),o.options)})}),t.emitter.on("change",o=>{s(()=>{e.setRawValue(r(e.rawValue,t.rawValue),o.options)}),s(()=>{t.setRawValue(n(e.rawValue,t.rawValue),o.options)})}),s(()=>{t.setRawValue(n(e.rawValue,t.rawValue),{forceEmit:!1,last:!0})})}function R(e,t){const n=e*(t.altKey?.1:1)*(t.shiftKey?10:1);return t.upKey?+n:t.downKey?-n:0}function re(e){return{altKey:e.altKey,downKey:e.key==="ArrowDown",shiftKey:e.shiftKey,upKey:e.key==="ArrowUp"}}function tt(e){return{altKey:e.altKey,downKey:e.key==="ArrowLeft",shiftKey:e.shiftKey,upKey:e.key==="ArrowRight"}}function Hl(e){return e==="ArrowUp"||e==="ArrowDown"}function ks(e){return Hl(e)||e==="ArrowLeft"||e==="ArrowRight"}function an(e,t){var n,r;const i=t.ownerDocument.defaultView,s=t.getBoundingClientRect();return{x:e.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+s.left),y:e.pageY-(((r=i&&i.scrollY)!==null&&r!==void 0?r:0)+s.top)}}class Pt{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new k,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var n;t.preventDefault(),(n=t.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(an(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(an(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(an(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const n=t.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=n}onTouchMove_(t){const n=t.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=n}onTouchEnd_(t){var n;const r=(n=t.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(r?{x:r.clientX-i.left,y:r.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey})}}const j=_("txt");class zl{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(j(),j(void 0,"num")),n.arrayPosition&&this.element.classList.add(j(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("input");r.classList.add(j("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(j()),this.inputElement.classList.add(j("i"));const i=t.createElement("div");i.classList.add(j("k")),this.element.appendChild(i),this.knobElement=i;const s=t.createElementNS(z,"svg");s.classList.add(j("g")),this.knobElement.appendChild(s);const o=t.createElementNS(z,"path");o.classList.add(j("gb")),s.appendChild(o),this.guideBodyElem_=o;const a=t.createElementNS(z,"path");a.classList.add(j("gh")),s.appendChild(a),this.guideHeadElem_=a;const l=t.createElement("div");l.classList.add(_("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(t){if(t.rawValue===null){this.element.classList.remove(j(void 0,"drg"));return}this.element.classList.add(j(void 0,"drg"));const n=t.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),i=T(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+i},0 L${r},4 L${r+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class fe{constructor(t,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=C(null),this.view=new zl(t,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new Pt(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var n,r;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),s=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let o=t;return i!==void 0&&(o=Math.max(o,i)),s!==void 0&&(o=Math.min(o,s)),o}onInputChange_(t){const r=t.currentTarget.value,i=this.parser_(r);E(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(t){const n=R(this.props.get("keyScale"),re(t));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(t){R(this.props.get("keyScale"),re(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const n=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(t){const n=this.computeDraggingValue_(t.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const n=this.computeDraggingValue_(t.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const ln=_("sld");class Kl{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(ln()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(ln("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const i=t.createElement("div");i.classList.add(ln("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const t=T(g(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class ql{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new Kl(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Pt(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){t.point&&this.value.setRawValue(g(T(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const n=R(this.props.get("keyScale"),tt(t));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(t){R(this.props.get("keyScale"),tt(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const cn=_("sldtxt");class Gl{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(cn());const r=t.createElement("div");r.classList.add(cn("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(cn("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class Ne{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new ql(t,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new fe(t,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new Gl(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(t){return N(t,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const t=this.sliderC_.props;return B(null,{max:t.get("max"),min:t.get("min")})}}function Ts(e){return{sliderProps:new v({keyScale:e.keyScale,max:e.max,min:e.min}),textProps:new v({formatter:C(e.formatter),keyScale:e.keyScale,pointerScale:C(e.pointerScale)})}}const Wl={containerUnitSize:"cnt-usz"};function Is(e){return`--${Wl[e]}`}function ie(e){return ps(e)}function lt(e){if(yn(e))return x(e,ie)}function Y(e,t){if(!e)return;const n=[],r=ls(e,t);r&&n.push(r);const i=cs(e);return i&&n.push(i),new pe(n)}function Yl(e){return e?e.major===jt.major:!1}function Vs(e){if(e==="inline"||e==="popup")return e}function me(e,t){e.write(t)}const Ee=_("ckb");class Xl{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Ee()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("label");r.classList.add(Ee("l")),this.element.appendChild(r),this.labelElement=r;const i=t.createElement("input");i.classList.add(Ee("i")),i.type="checkbox",this.labelElement.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const s=t.createElement("div");s.classList.add(Ee("w")),this.labelElement.appendChild(s);const o=Ue(t,"check");s.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Jl{constructor(t,n){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Xl(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(t){const n=t.currentTarget;this.value.rawValue=n.checked,t.preventDefault(),t.stopPropagation()}onLabelMouseDown_(t){t.preventDefault()}}function Zl(e){const t=[],n=rr(e.options);return n&&t.push(n),new pe(t)}const Ql=A({id:"input-bool",type:"input",accept:(e,t)=>{if(typeof e!="boolean")return null;const n=x(t,r=>({options:r.optional.custom(he),readonly:r.optional.constant(!1)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Ps,constraint:e=>Zl(e.params),writer:e=>me},controller:e=>{const t=e.document,n=e.value,r=e.constraint,i=r&&De(r,de);return i?new ut(t,{props:new v({options:i.values.value("options")}),value:n,viewProps:e.viewProps}):new Jl(t,{value:n,viewProps:e.viewProps})},api(e){return typeof e.controller.value.rawValue!="boolean"?null:e.controller.valueController instanceof ut?new er(e.controller):null}}),ft=_("col");class tc{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(ft()),n.foldable.bindExpandedClass(this.element,ft(void 0,"expanded")),K(n.foldable,"completed",Bt(this.element,ft(void 0,"cpl")));const r=t.createElement("div");r.classList.add(ft("h")),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(ft("s")),r.appendChild(i),this.swatchElement=i;const s=t.createElement("div");if(s.classList.add(ft("t")),r.appendChild(s),this.textElement=s,n.pickerLayout==="inline"){const o=t.createElement("div");o.classList.add(ft("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function ec(e,t,n){const r=T(e/255,0,1),i=T(t/255,0,1),s=T(n/255,0,1),o=Math.max(r,i,s),a=Math.min(r,i,s),l=o-a;let c=0,u=0;const p=(a+o)/2;return l!==0&&(u=l/(1-Math.abs(o+a-1)),r===o?c=(i-s)/l:i===o?c=2+(s-r)/l:c=4+(r-i)/l,c=c/6+(c<0?1:0)),[c*360,u*100,p*100]}function nc(e,t,n){const r=(e%360+360)%360,i=T(t/100,0,1),s=T(n/100,0,1),o=(1-Math.abs(2*s-1))*i,a=o*(1-Math.abs(r/60%2-1)),l=s-o/2;let c,u,p;return r>=0&&r<60?[c,u,p]=[o,a,0]:r>=60&&r<120?[c,u,p]=[a,o,0]:r>=120&&r<180?[c,u,p]=[0,o,a]:r>=180&&r<240?[c,u,p]=[0,a,o]:r>=240&&r<300?[c,u,p]=[a,0,o]:[c,u,p]=[o,0,a],[(c+l)*255,(u+l)*255,(p+l)*255]}function rc(e,t,n){const r=T(e/255,0,1),i=T(t/255,0,1),s=T(n/255,0,1),o=Math.max(r,i,s),a=Math.min(r,i,s),l=o-a;let c;l===0?c=0:o===r?c=60*(((i-s)/l%6+6)%6):o===i?c=60*((s-r)/l+2):c=60*((r-i)/l+4);const u=o===0?0:l/o,p=o;return[c,u*100,p*100]}function Os(e,t,n){const r=ss(e,360),i=T(t/100,0,1),s=T(n/100,0,1),o=s*i,a=o*(1-Math.abs(r/60%2-1)),l=s-o;let c,u,p;return r>=0&&r<60?[c,u,p]=[o,a,0]:r>=60&&r<120?[c,u,p]=[a,o,0]:r>=120&&r<180?[c,u,p]=[0,o,a]:r>=180&&r<240?[c,u,p]=[0,a,o]:r>=240&&r<300?[c,u,p]=[a,0,o]:[c,u,p]=[o,0,a],[(c+l)*255,(u+l)*255,(p+l)*255]}function ic(e,t,n){const r=n+t*(100-Math.abs(2*n-100))/200;return[e,r!==0?t*(100-Math.abs(2*n-100))/r:0,n+t*(100-Math.abs(2*n-100))/200]}function sc(e,t,n){const r=100-Math.abs(n*(200-t)/100-100);return[e,r!==0?t*n/r:0,n*(200-t)/200]}function q(e){return[e[0],e[1],e[2]]}function ze(e,t){return[e[0],e[1],e[2],t]}const oc={hsl:{hsl:(e,t,n)=>[e,t,n],hsv:ic,rgb:nc},hsv:{hsl:sc,hsv:(e,t,n)=>[e,t,n],rgb:Os},rgb:{hsl:ec,hsv:rc,rgb:(e,t,n)=>[e,t,n]}};function Rt(e,t){return[t==="float"?1:e==="rgb"?255:360,t==="float"?1:e==="rgb"?255:100,t==="float"?1:e==="rgb"?255:100]}function ac(e,t){return e===t?t:ss(e,t)}function As(e,t,n){var r;const i=Rt(t,n);return[t==="rgb"?T(e[0],0,i[0]):ac(e[0],i[0]),T(e[1],0,i[1]),T(e[2],0,i[2]),T((r=e[3])!==null&&r!==void 0?r:1,0,1)]}function Gr(e,t,n,r){const i=Rt(t,n),s=Rt(t,r);return e.map((o,a)=>o/i[a]*s[a])}function Rs(e,t,n){const r=Gr(e,t.mode,t.type,"int"),i=oc[t.mode][n.mode](...r);return Gr(i,n.mode,"int",n.type)}class b{static black(){return new b([0,0,0],"rgb")}constructor(t,n){this.type="int",this.mode=n,this.comps_=As(t,n,this.type)}getComponents(t){return ze(Rs(q(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const it=_("colp");class lc{constructor(t,n){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(it()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(it("hsv"));const i=t.createElement("div");i.classList.add(it("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);const s=t.createElement("div");s.classList.add(it("h")),this.hPaletteView_=n.hPaletteView,s.appendChild(this.hPaletteView_.element),r.appendChild(s),this.element.appendChild(r);const o=t.createElement("div");if(o.classList.add(it("rgb")),this.textsView_=n.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const a=t.createElement("div");a.classList.add(it("a"));const l=t.createElement("div");l.classList.add(it("ap")),l.appendChild(this.alphaViews_.palette.element),a.appendChild(l);const c=t.createElement("div");c.classList.add(it("at")),c.appendChild(this.alphaViews_.text.element),a.appendChild(c),this.element.appendChild(a)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function cc(e){return e==="int"?"int":e==="float"?"float":void 0}function ir(e){return x(e,t=>({color:t.optional.object({alpha:t.optional.boolean,type:t.optional.custom(cc)}),expanded:t.optional.boolean,picker:t.optional.custom(Vs),readonly:t.optional.constant(!1)}))}function yt(e){return e?.1:1}function Ls(e){var t;return(t=e.color)===null||t===void 0?void 0:t.type}class sr{constructor(t,n){this.type="float",this.mode=n,this.comps_=As(t,n,this.type)}getComponents(t){return ze(Rs(q(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const uc={int:(e,t)=>new b(e,t),float:(e,t)=>new sr(e,t)};function or(e,t,n){return uc[n](e,t)}function pc(e){return e.type==="float"}function dc(e){return e.type==="int"}function hc(e){const t=e.getComponents(),n=Rt(e.mode,"int");return new b([Math.round(g(t[0],0,1,0,n[0])),Math.round(g(t[1],0,1,0,n[1])),Math.round(g(t[2],0,1,0,n[2])),t[3]],e.mode)}function fc(e){const t=e.getComponents(),n=Rt(e.mode,"int");return new sr([g(t[0],0,n[0],0,1),g(t[1],0,n[1],0,1),g(t[2],0,n[2],0,1),t[3]],e.mode)}function O(e,t){if(e.type===t)return e;if(dc(e)&&t==="float")return fc(e);if(pc(e)&&t==="int")return hc(e);throw P.shouldNeverHappen()}function mc(e,t){return e.alpha===t.alpha&&e.mode===t.mode&&e.notation===t.notation&&e.type===t.type}function F(e,t){const n=e.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*t:parseFloat(e),t)}const vc={deg:e=>e,grad:e=>e*360/400,rad:e=>e*360/(2*Math.PI),turn:e=>e*360};function Ds(e){const t=e.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!t)return parseFloat(e);const n=parseFloat(t[1]),r=t[2];return vc[r](n)}function Ms(e){const t=e.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[F(t[1],255),F(t[2],255),F(t[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function _c(e){const t=Ms(e);return t?new b(t,"rgb"):null}function Ns(e){const t=e.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[F(t[1],255),F(t[2],255),F(t[3],255),F(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function bc(e){const t=Ns(e);return t?new b(t,"rgb"):null}function Bs(e){const t=e.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[Ds(t[1]),F(t[2],100),F(t[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function gc(e){const t=Bs(e);return t?new b(t,"hsl"):null}function js(e){const t=e.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[Ds(t[1]),F(t[2],100),F(t[3],100),F(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function wc(e){const t=js(e);return t?new b(t,"hsl"):null}function Fs(e){const t=e.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)];const n=e.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function yc(e){const t=Fs(e);return t?new b(t,"rgb"):null}function $s(e){const t=e.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),g(parseInt(t[4]+t[4],16),0,255,0,1)];const n=e.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),g(parseInt(n[4],16),0,255,0,1)]:null}function Ec(e){const t=$s(e);return t?new b(t,"rgb"):null}function Us(e){const t=e.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const n=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Cc(e){return t=>{const n=Us(t);return n?or(n,"rgb",e):null}}function Hs(e){const t=e.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const n=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function xc(e){return t=>{const n=Hs(t);return n?or(n,"rgb",e):null}}const Pc=[{parser:Fs,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:$s,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Ms,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Ns,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Bs,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:js,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Us,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Hs,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Sc(e){return Pc.reduce((t,{parser:n,result:r})=>t||(n(e)?r:null),null)}function kc(e,t="int"){const n=Sc(e);return n?n.notation==="hex"&&t!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:t}):null:null}function ve(e){const t=[yc,Ec,_c,bc,gc,wc];t.push(Cc("int"),xc("int"));const n=$l(t);return r=>{const i=n(r);return i?O(i,e):null}}function Tc(e){const t=ve("int");if(typeof e!="string")return b.black();const n=t(e);return n??b.black()}function zs(e){const t=T(Math.floor(e),0,255).toString(16);return t.length===1?`0${t}`:t}function ar(e,t="#"){const n=q(e.getComponents("rgb")).map(zs).join("");return`${t}${n}`}function lr(e,t="#"){const n=e.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(zs).join("");return`${t}${r}`}function Ks(e){const t=L(0),n=O(e,"int");return`rgb(${q(n.getComponents("rgb")).map(i=>t(i)).join(", ")})`}function Se(e){const t=L(2),n=L(0);return`rgba(${O(e,"int").getComponents("rgb").map((s,o)=>(o===3?t:n)(s)).join(", ")})`}function Ic(e){const t=[L(0),Me,Me],n=O(e,"int");return`hsl(${q(n.getComponents("hsl")).map((i,s)=>t[s](i)).join(", ")})`}function Vc(e){const t=[L(0),Me,Me,L(2)];return`hsla(${O(e,"int").getComponents("hsl").map((i,s)=>t[s](i)).join(", ")})`}function qs(e,t){const n=L(t==="float"?2:0),r=["r","g","b"],i=O(e,t);return`{${q(i.getComponents("rgb")).map((o,a)=>`${r[a]}: ${n(o)}`).join(", ")}}`}function Oc(e){return t=>qs(t,e)}function Gs(e,t){const n=L(2),r=L(t==="float"?2:0),i=["r","g","b","a"];return`{${O(e,t).getComponents("rgb").map((a,l)=>{const c=l===3?n:r;return`${i[l]}: ${c(a)}`}).join(", ")}}`}function Ac(e){return t=>Gs(t,e)}const Rc=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:ar},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:lr},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Ks},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Se},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:Ic},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:Vc},...["int","float"].reduce((e,t)=>[...e,{format:{alpha:!1,mode:"rgb",notation:"object",type:t},stringifier:Oc(t)},{format:{alpha:!0,mode:"rgb",notation:"object",type:t},stringifier:Ac(t)}],[])];function Ws(e){return Rc.reduce((t,n)=>t||(mc(n.format,e)?n.stringifier:null),null)}const Xt=_("apl");class Lc{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Xt()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=t.createElement("div");r.classList.add(Xt("b")),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(Xt("c")),r.appendChild(i),this.colorElem_=i;const s=t.createElement("div");s.classList.add(Xt("m")),this.element.appendChild(s),this.markerElem_=s;const o=t.createElement("div");o.classList.add(Xt("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const t=this.value.rawValue,n=t.getComponents("rgb"),r=new b([n[0],n[1],n[2],0],"rgb"),i=new b([n[0],n[1],n[2],255],"rgb"),s=["to right",Se(r),Se(i)];this.colorElem_.style.background=`linear-gradient(${s.join(",")})`,this.previewElem_.style.backgroundColor=Se(t);const o=g(n[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class Dc{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Lc(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Pt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=t.point.x/t.bounds.width,i=this.value.rawValue,[s,o,a]=i.getComponents("hsv");this.value.setRawValue(new b([s,o,a,r],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const n=R(yt(!0),tt(t));if(n===0)return;const r=this.value.rawValue,[i,s,o,a]=r.getComponents("hsv");this.value.setRawValue(new b([i,s,o,a+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){R(yt(!0),tt(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Tt=_("coltxt");function Mc(e){const t=e.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return t.appendChild(n.reduce((r,i)=>{const s=e.createElement("option");return s.textContent=i.text,s.value=i.value,r.appendChild(s),r},e.createDocumentFragment())),t}class Nc{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Tt()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(Tt("m")),this.modeElem_=Mc(t),this.modeElem_.classList.add(Tt("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=t.createElement("div");i.classList.add(Tt("mm")),i.appendChild(Ue(t,"dropdown")),r.appendChild(i),this.element.appendChild(r);const s=t.createElement("div");s.classList.add(Tt("w")),this.element.appendChild(s),this.inputsElem_=s,this.inputViews_=n.inputViews,this.applyInputViews_(),X(n.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(t){this.inputViews_=t,this.applyInputViews_()}applyInputViews_(){fs(this.inputsElem_);const t=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=t.createElement("div");r.classList.add(Tt("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}}function Bc(e){return L(e==="float"?2:0)}function jc(e,t,n){const r=Rt(e,t)[n];return new le({min:0,max:r})}function Fc(e,t,n){return new fe(e,{arrayPosition:n===0?"fst":n===2?"lst":"mid",parser:t.parser,props:v.fromObject({formatter:Bc(t.colorType),keyScale:yt(!1),pointerScale:t.colorType==="float"?.01:1}),value:C(0,{constraint:jc(t.colorMode,t.colorType,n)}),viewProps:t.viewProps})}function $c(e,t){const n={colorMode:t.colorMode,colorType:t.colorType,parser:Q,viewProps:t.viewProps};return[0,1,2].map(r=>{const i=Fc(e,n,r);return $t({primary:t.value,secondary:i.value,forward(s){return O(s,t.colorType).getComponents(t.colorMode)[r]},backward(s,o){const a=t.colorMode,c=O(s,t.colorType).getComponents(a);c[r]=o;const u=or(ze(q(c),c[3]),a,t.colorType);return O(u,"int")}}),i})}function Uc(e,t){const n=new ne(e,{parser:ve("int"),props:v.fromObject({formatter:ar}),value:C(b.black()),viewProps:t.viewProps});return $t({primary:t.value,secondary:n.value,forward:r=>new b(q(r.getComponents()),r.mode),backward:(r,i)=>new b(ze(q(i.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function Hc(e){return e!=="hex"}class zc{constructor(t,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=C(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new Nc(t,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const n=this.colorMode.rawValue;return Hc(n)?$c(t,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):Uc(t,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(t){const n=t.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}}const un=_("hpl");class Kc{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(un()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=t.createElement("div");r.classList.add(un("c")),this.element.appendChild(r);const i=t.createElement("div");i.classList.add(un("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=this.value.rawValue,[n]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=Ks(new b([n,100,100],"hsv"));const r=g(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}}class qc{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Kc(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Pt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=g(T(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),i=this.value.rawValue,[,s,o,a]=i.getComponents("hsv");this.value.setRawValue(new b([r,s,o,a],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const n=R(yt(!1),tt(t));if(n===0)return;const r=this.value.rawValue,[i,s,o,a]=r.getComponents("hsv");this.value.setRawValue(new b([i+n,s,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){R(yt(!1),tt(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const pn=_("svp"),Wr=64;class Gc{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(pn()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=t.createElement("canvas");r.height=Wr,r.width=Wr,r.classList.add(pn("c")),this.element.appendChild(r),this.canvasElement=r;const i=t.createElement("div");i.classList.add(pn("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=qa(this.canvasElement);if(!t)return;const r=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,s=this.canvasElement.height,o=t.getImageData(0,0,i,s),a=o.data;for(let u=0;u<s;u++)for(let p=0;p<i;p++){const h=g(p,0,i,0,100),d=g(u,0,s,100,0),w=Os(r[0],h,d),D=(u*i+p)*4;a[D]=w[0],a[D+1]=w[1],a[D+2]=w[2],a[D+3]=255}t.putImageData(o,0,0);const l=g(r[1],0,100,0,100);this.markerElem_.style.left=`${l}%`;const c=g(r[2],0,100,100,0);this.markerElem_.style.top=`${c}%`}onValueChange_(){this.update_()}}class Wc{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Gc(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Pt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=g(t.point.x,0,t.bounds.width,0,100),i=g(t.point.y,0,t.bounds.height,100,0),[s,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new b([s,r,i,o],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){ks(t.key)&&t.preventDefault();const[n,r,i,s]=this.value.rawValue.getComponents("hsv"),o=yt(!1),a=R(o,tt(t)),l=R(o,re(t));a===0&&l===0||this.value.setRawValue(new b([n,r+a,i+l,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const n=yt(!1),r=R(n,tt(t)),i=R(n,re(t));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Yc{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new qc(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Wc(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new Dc(t,{value:this.value,viewProps:this.viewProps}),text:new fe(t,{parser:Q,props:v.fromObject({pointerScale:.01,keyScale:.1,formatter:L(2)}),value:C(0,{constraint:new le({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&$t({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,i)=>{const s=r.getComponents();return s[3]=i,new b(s,r.mode)}}),this.textsC_=new zc(t,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new lc(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const dn=_("colsw");class Xc{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=t.createElement("div"),this.element.classList.add(dn()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(dn("sw")),this.element.appendChild(r),this.swatchElem_=r;const i=t.createElement("button");i.classList.add(dn("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=lr(t)}onValueChange_(){this.update_()}}class Jc{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new Xc(t,{value:this.value,viewProps:this.viewProps})}}class cr{constructor(t,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=ue.create(n.expanded),this.swatchC_=new Jc(t,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new ne(t,{parser:n.parser,props:v.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new tc(t,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new xs(t,{viewProps:this.viewProps}):null;const i=new Yc(t,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(s=>{s.addEventListener("blur",this.onPopupChildBlur_),s.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),$t({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:s=>s,backward:(s,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),tr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const n=this.view.element,r=t.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const n=this.popC_.view.element,r=ms(t);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!Wn(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function Zc(e){return q(e.getComponents("rgb")).reduce((t,n)=>t<<8|Math.floor(n)&255,0)}function Qc(e){return e.getComponents("rgb").reduce((t,n,r)=>{const i=Math.floor(r===3?n*255:n)&255;return t<<8|i},0)>>>0}function tu(e){return new b([e>>16&255,e>>8&255,e&255],"rgb")}function eu(e){return new b([e>>24&255,e>>16&255,e>>8&255,g(e&255,0,255,0,1)],"rgb")}function nu(e){return typeof e!="number"?b.black():tu(e)}function ru(e){return typeof e!="number"?b.black():eu(e)}function ke(e,t){return typeof e!="object"||E(e)?!1:t in e&&typeof e[t]=="number"}function Ys(e){return ke(e,"r")&&ke(e,"g")&&ke(e,"b")}function Xs(e){return Ys(e)&&ke(e,"a")}function Js(e){return Ys(e)}function ur(e,t){if(e.mode!==t.mode||e.type!==t.type)return!1;const n=e.getComponents(),r=t.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function Yr(e){return"a"in e?[e.r,e.g,e.b,e.a]:[e.r,e.g,e.b]}function iu(e){const t=Ws(e);return t?(n,r)=>{me(n,t(r))}:null}function su(e){const t=e?Qc:Zc;return(n,r)=>{me(n,t(r))}}function ou(e,t,n){const i=O(t,n).toRgbaObject();e.writeProperty("r",i.r),e.writeProperty("g",i.g),e.writeProperty("b",i.b),e.writeProperty("a",i.a)}function au(e,t,n){const i=O(t,n).toRgbaObject();e.writeProperty("r",i.r),e.writeProperty("g",i.g),e.writeProperty("b",i.b)}function lu(e,t){return(n,r)=>{e?ou(n,r,t):au(n,r,t)}}function cu(e){var t;return!!(!((t=e?.color)===null||t===void 0)&&t.alpha)}function uu(e){return e?t=>lr(t,"0x"):t=>ar(t,"0x")}function pu(e){return"color"in e||e.view==="color"}const du=A({id:"input-color-number",type:"input",accept:(e,t)=>{if(typeof e!="number"||!pu(t))return null;const n=ir(t);return n?{initialValue:e,params:Object.assign(Object.assign({},n),{supportsAlpha:cu(t)})}:null},binding:{reader:e=>e.params.supportsAlpha?ru:nu,equals:ur,writer:e=>su(e.params.supportsAlpha)},controller:e=>{var t,n;return new cr(e.document,{colorType:"int",expanded:(t=e.params.expanded)!==null&&t!==void 0?t:!1,formatter:uu(e.params.supportsAlpha),parser:ve("int"),pickerLayout:(n=e.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:e.params.supportsAlpha,value:e.value,viewProps:e.viewProps})}});function hu(e,t){if(!Js(e))return O(b.black(),t);if(t==="int"){const n=Yr(e);return new b(n,"rgb")}if(t==="float"){const n=Yr(e);return new sr(n,"rgb")}return O(b.black(),"int")}function fu(e){return Xs(e)}function mu(e){return t=>{const n=hu(t,e);return O(n,"int")}}function vu(e,t){return n=>e?Gs(n,t):qs(n,t)}const _u=A({id:"input-color-object",type:"input",accept:(e,t)=>{var n;if(!Js(e))return null;const r=ir(t);return r?{initialValue:e,params:Object.assign(Object.assign({},r),{colorType:(n=Ls(t))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:e=>mu(e.params.colorType),equals:ur,writer:e=>lu(fu(e.initialValue),e.params.colorType)},controller:e=>{var t,n;const r=Xs(e.initialValue);return new cr(e.document,{colorType:e.params.colorType,expanded:(t=e.params.expanded)!==null&&t!==void 0?t:!1,formatter:vu(r,e.params.colorType),parser:ve("int"),pickerLayout:(n=e.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:e.value,viewProps:e.viewProps})}}),bu=A({id:"input-color-string",type:"input",accept:(e,t)=>{if(typeof e!="string"||t.view==="text")return null;const n=kc(e,Ls(t));if(!n)return null;const r=Ws(n);if(!r)return null;const i=ir(t);return i?{initialValue:e,params:Object.assign(Object.assign({},i),{format:n,stringifier:r})}:null},binding:{reader:()=>Tc,equals:ur,writer:e=>{const t=iu(e.params.format);if(!t)throw P.notBindable();return t}},controller:e=>{var t,n;return new cr(e.document,{colorType:e.params.format.type,expanded:(t=e.params.expanded)!==null&&t!==void 0?t:!1,formatter:e.params.stringifier,parser:ve("int"),pickerLayout:(n=e.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:e.params.format.alpha,value:e.value,viewProps:e.viewProps})}});class pr{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const n=this.asm_.toComponents(t).map((r,i)=>{var s,o;return(o=(s=this.components[i])===null||s===void 0?void 0:s.constrain(r))!==null&&o!==void 0?o:r});return this.asm_.fromComponents(n)}}const Xr=_("pndtxt");class gu{constructor(t,n){this.textViews=n.textViews,this.element=t.createElement("div"),this.element.classList.add(Xr()),this.textViews.forEach(r=>{const i=t.createElement("div");i.classList.add(Xr("a")),i.appendChild(r.element),this.element.appendChild(i)})}}function wu(e,t,n){return new fe(e,{arrayPosition:n===0?"fst":n===t.axes.length-1?"lst":"mid",parser:t.parser,props:t.axes[n].textProps,value:C(0,{constraint:t.axes[n].constraint}),viewProps:t.viewProps})}class dr{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,i)=>wu(t,n,i)),this.acs_.forEach((r,i)=>{$t({primary:this.value,secondary:r.value,forward:s=>n.assembly.toComponents(s)[i],backward:(s,o)=>{const a=n.assembly.toComponents(s);return a[i]=o,n.assembly.fromComponents(a)}})}),this.view=new gu(t,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}}class yu extends ee{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}}function Eu(e,t){const n=[],r=ls(e,t);r&&n.push(r);const i=cs(e);i&&n.push(i);const s=rr(e.options);return s&&n.push(s),new pe(n)}const Cu=A({id:"input-number",type:"input",accept:(e,t)=>{if(typeof e!="number")return null;const n=x(t,r=>Object.assign(Object.assign({},ps(r)),{options:r.optional.custom(he),readonly:r.optional.constant(!1)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>is,constraint:e=>Eu(e.params,e.initialValue),writer:e=>me},controller:e=>{const t=e.value,n=e.constraint,r=n&&De(n,de);if(r)return new ut(e.document,{props:new v({options:r.values.value("options")}),value:t,viewProps:e.viewProps});const i=us(e.params,t.rawValue),s=n&&De(n,le);return s?new Ne(e.document,Object.assign(Object.assign({},Ts(Object.assign(Object.assign({},i),{keyScale:C(i.keyScale),max:s.values.value("max"),min:s.values.value("min")}))),{parser:Q,value:t,viewProps:e.viewProps})):new fe(e.document,{parser:Q,props:v.fromObject(i),value:t,viewProps:e.viewProps})},api(e){return typeof e.controller.value.rawValue!="number"?null:e.controller.valueController instanceof Ne?new yu(e.controller):e.controller.valueController instanceof ut?new er(e.controller):null}});class ct{constructor(t=0,n=0){this.x=t,this.y=n}getComponents(){return[this.x,this.y]}static isObject(t){if(E(t))return!1;const n=t.x,r=t.y;return!(typeof n!="number"||typeof r!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y}toObject(){return{x:this.x,y:this.y}}}const Zs={toComponents:e=>e.getComponents(),fromComponents:e=>new ct(...e)},It=_("p2d");class xu{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(It()),n.viewProps.bindClassModifiers(this.element),X(n.expanded,Bt(this.element,It(void 0,"expanded")));const r=t.createElement("div");r.classList.add(It("h")),this.element.appendChild(r);const i=t.createElement("button");i.classList.add(It("b")),i.appendChild(Ue(t,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;const s=t.createElement("div");if(s.classList.add(It("t")),r.appendChild(s),this.textElement=s,n.pickerLayout==="inline"){const o=t.createElement("div");o.classList.add(It("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const st=_("p2dp");class Pu{constructor(t,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=t.createElement("div"),this.element.classList.add(st()),n.layout==="popup"&&this.element.classList.add(st(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("div");r.classList.add(st("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const i=t.createElementNS(z,"svg");i.classList.add(st("g")),this.padElement.appendChild(i),this.svgElem_=i;const s=t.createElementNS(z,"line");s.classList.add(st("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);const o=t.createElementNS(z,"line");o.classList.add(st("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const a=t.createElementNS(z,"line");a.classList.add(st("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const l=t.createElement("div");l.classList.add(st("m")),this.padElement.appendChild(l),this.markerElem_=l,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),i=g(t,-r,+r,0,100),s=g(n,-r,+r,0,100),o=this.props_.get("invertsY")?100-s:s;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Jr(e,t,n){return[R(t[0],tt(e)),R(t[1],re(e))*(n?1:-1)]}class Su{constructor(t,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Pu(t,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Pt(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;const r=this.props.get("max"),i=g(t.point.x,0,t.bounds.width,-r,+r),s=g(this.props.get("invertsY")?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-r,+r);this.value.setRawValue(new ct(i,s),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){ks(t.key)&&t.preventDefault();const[n,r]=Jr(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new ct(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[n,r]=Jr(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class ku{constructor(t,n){var r,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=ue.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new xs(t,{viewProps:this.viewProps}):null;const s=new Su(t,{layout:n.pickerLayout,props:new v({invertsY:C(n.invertsY),max:C(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.textC_=new dr(t,{assembly:Zs,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new xu(t,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),$t({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),tr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(t){if(!this.popC_)return;const n=this.view.element,r=t.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const n=this.popC_.view.element,r=ms(t);r&&n.contains(r)||r&&r===this.view.buttonElement&&!Wn(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.view.buttonElement.focus()}}function Tu(e){return ct.isObject(e)?new ct(e.x,e.y):new ct}function Iu(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y)}function Vu(e,t){return new pr({assembly:Zs,components:[Y(Object.assign(Object.assign({},e),e.x),t.x),Y(Object.assign(Object.assign({},e),e.y),t.y)]})}function Zr(e,t){var n,r;if(!E(e.min)||!E(e.max))return Math.max(Math.abs((n=e.min)!==null&&n!==void 0?n:0),Math.abs((r=e.max)!==null&&r!==void 0?r:0));const i=os(e);return Math.max(Math.abs(i)*10,Math.abs(t)*10)}function Ou(e,t){var n,r;const i=Zr(gt(e,(n=e.x)!==null&&n!==void 0?n:{}),t.x),s=Zr(gt(e,(r=e.y)!==null&&r!==void 0?r:{}),t.y);return Math.max(i,s)}function Au(e){if(!("y"in e))return!1;const t=e.y;return t&&"inverted"in t?!!t.inverted:!1}const Ru=A({id:"input-point2d",type:"input",accept:(e,t)=>{if(!ct.isObject(e))return null;const n=x(t,r=>Object.assign(Object.assign({},ie(r)),{expanded:r.optional.boolean,picker:r.optional.custom(Vs),readonly:r.optional.constant(!1),x:r.optional.custom(lt),y:r.optional.object(Object.assign(Object.assign({},ie(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:e,params:n}:null},binding:{reader:()=>Tu,constraint:e=>Vu(e.params,e.initialValue),equals:ct.equals,writer:()=>Iu},controller:e=>{var t,n;const r=e.document,i=e.value,s=e.constraint,o=[e.params.x,e.params.y];return new ku(r,{axes:i.rawValue.getComponents().map((a,l)=>{var c;return Gn({constraint:s.components[l],initialValue:a,params:gt(e.params,(c=o[l])!==null&&c!==void 0?c:{})})}),expanded:(t=e.params.expanded)!==null&&t!==void 0?t:!1,invertsY:Au(e.params),max:Ou(e.params,i.rawValue),parser:Q,pickerLayout:(n=e.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:e.viewProps})}});class Ot{constructor(t=0,n=0,r=0){this.x=t,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(E(t))return!1;const n=t.x,r=t.y,i=t.z;return!(typeof n!="number"||typeof r!="number"||typeof i!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y&&t.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Qs={toComponents:e=>e.getComponents(),fromComponents:e=>new Ot(...e)};function Lu(e){return Ot.isObject(e)?new Ot(e.x,e.y,e.z):new Ot}function Du(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y),e.writeProperty("z",t.z)}function Mu(e,t){return new pr({assembly:Qs,components:[Y(Object.assign(Object.assign({},e),e.x),t.x),Y(Object.assign(Object.assign({},e),e.y),t.y),Y(Object.assign(Object.assign({},e),e.z),t.z)]})}const Nu=A({id:"input-point3d",type:"input",accept:(e,t)=>{if(!Ot.isObject(e))return null;const n=x(t,r=>Object.assign(Object.assign({},ie(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(lt),y:r.optional.custom(lt),z:r.optional.custom(lt)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Lu,constraint:e=>Mu(e.params,e.initialValue),equals:Ot.equals,writer:e=>Du},controller:e=>{const t=e.value,n=e.constraint,r=[e.params.x,e.params.y,e.params.z];return new dr(e.document,{assembly:Qs,axes:t.rawValue.getComponents().map((i,s)=>{var o;return Gn({constraint:n.components[s],initialValue:i,params:gt(e.params,(o=r[s])!==null&&o!==void 0?o:{})})}),parser:Q,value:t,viewProps:e.viewProps})}});class At{constructor(t=0,n=0,r=0,i=0){this.x=t,this.y=n,this.z=r,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(E(t))return!1;const n=t.x,r=t.y,i=t.z,s=t.w;return!(typeof n!="number"||typeof r!="number"||typeof i!="number"||typeof s!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y&&t.z===n.z&&t.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const to={toComponents:e=>e.getComponents(),fromComponents:e=>new At(...e)};function Bu(e){return At.isObject(e)?new At(e.x,e.y,e.z,e.w):new At}function ju(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y),e.writeProperty("z",t.z),e.writeProperty("w",t.w)}function Fu(e,t){return new pr({assembly:to,components:[Y(Object.assign(Object.assign({},e),e.x),t.x),Y(Object.assign(Object.assign({},e),e.y),t.y),Y(Object.assign(Object.assign({},e),e.z),t.z),Y(Object.assign(Object.assign({},e),e.w),t.w)]})}const $u=A({id:"input-point4d",type:"input",accept:(e,t)=>{if(!At.isObject(e))return null;const n=x(t,r=>Object.assign(Object.assign({},ie(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(lt),x:r.optional.custom(lt),y:r.optional.custom(lt),z:r.optional.custom(lt)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Bu,constraint:e=>Fu(e.params,e.initialValue),equals:At.equals,writer:e=>ju},controller:e=>{const t=e.value,n=e.constraint,r=[e.params.x,e.params.y,e.params.z,e.params.w];return new dr(e.document,{assembly:to,axes:t.rawValue.getComponents().map((i,s)=>{var o;return Gn({constraint:n.components[s],initialValue:i,params:gt(e.params,(o=r[s])!==null&&o!==void 0?o:{})})}),parser:Q,value:t,viewProps:e.viewProps})}});function Uu(e){const t=[],n=rr(e.options);return n&&t.push(n),new pe(t)}const Hu=A({id:"input-string",type:"input",accept:(e,t)=>{if(typeof e!="string")return null;const n=x(t,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(he)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Ss,constraint:e=>Uu(e.params),writer:e=>me},controller:e=>{const t=e.document,n=e.value,r=e.constraint,i=r&&De(r,de);return i?new ut(t,{props:new v({options:i.values.value("options")}),value:n,viewProps:e.viewProps}):new ne(t,{parser:s=>s,props:v.fromObject({formatter:Sn}),value:n,viewProps:e.viewProps})},api(e){return typeof e.controller.value.rawValue!="string"?null:e.controller.valueController instanceof ut?new er(e.controller):null}}),_e={monitor:{defaultInterval:200,defaultRows:3}},Qr=_("mll");class zu{constructor(t,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=t.createElement("div"),this.element.classList.add(Qr()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("textarea");r.classList.add(Qr("i")),r.style.height=`calc(var(${Is("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const t=this.textareaElem_,n=t.scrollTop===t.scrollHeight-t.clientHeight,r=[];this.value.rawValue.forEach(i=>{i!==void 0&&r.push(this.formatter_(i))}),t.textContent=r.join(`
`),n&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class hr{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new zu(t,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const ti=_("sgl");class Ku{constructor(t,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=t.createElement("div"),this.element.classList.add(ti()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("input");r.classList.add(ti("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const t=this.value.rawValue,n=t[t.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class fr{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new Ku(t,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}const qu=A({id:"monitor-bool",type:"monitor",accept:(e,t)=>{if(typeof e!="boolean")return null;const n=x(t,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Ps},controller:e=>{var t;return e.value.rawValue.length===1?new fr(e.document,{formatter:qr,value:e.value,viewProps:e.viewProps}):new hr(e.document,{formatter:qr,rows:(t=e.params.rows)!==null&&t!==void 0?t:_e.monitor.defaultRows,value:e.value,viewProps:e.viewProps})}});class Gu extends ee{get max(){return this.controller.valueController.props.get("max")}set max(t){this.controller.valueController.props.set("max",t)}get min(){return this.controller.valueController.props.get("min")}set min(t){this.controller.valueController.props.set("min",t)}}const ot=_("grl");class Wu{constructor(t,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(ot()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=t.createElementNS(z,"svg");r.classList.add(ot("g")),r.style.height=`calc(var(${Is("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const i=t.createElementNS(z,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const s=t.createElement("div");s.classList.add(ot("t"),_("tt")()),this.element.appendChild(s),this.tooltipElem_=s,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:t,clientHeight:n}=this.element,r=this.value.rawValue.length-1,i=this.props_.get("min"),s=this.props_.get("max"),o=[];this.value.rawValue.forEach((p,h)=>{if(p===void 0)return;const d=g(h,0,r,0,t),w=g(p,i,s,n,0);o.push([d,w].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const a=this.tooltipElem_,l=this.value.rawValue[this.cursor_.rawValue];if(l===void 0){a.classList.remove(ot("t","a"));return}const c=g(this.cursor_.rawValue,0,r,0,t),u=g(l,i,s,n,0);a.style.left=`${c}px`,a.style.top=`${u}px`,a.textContent=`${this.formatter_(l)}`,a.classList.contains(ot("t","a"))||(a.classList.add(ot("t","a"),ot("t","in")),Le(a),a.classList.remove(ot("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class eo{constructor(t,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=C(-1),this.view=new Wu(t,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!Wn(t))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new Pt(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(t){return N(t,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return B(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){const{clientWidth:n}=this.view.element;this.cursor_.rawValue=Math.floor(g(t.offsetX,0,n,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){if(!t.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(g(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function kn(e){return E(e.format)?L(2):e.format}function Yu(e){var t;return e.value.rawValue.length===1?new fr(e.document,{formatter:kn(e.params),value:e.value,viewProps:e.viewProps}):new hr(e.document,{formatter:kn(e.params),rows:(t=e.params.rows)!==null&&t!==void 0?t:_e.monitor.defaultRows,value:e.value,viewProps:e.viewProps})}function Xu(e){var t,n,r;return new eo(e.document,{formatter:kn(e.params),rows:(t=e.params.rows)!==null&&t!==void 0?t:_e.monitor.defaultRows,props:v.fromObject({max:(n=e.params.max)!==null&&n!==void 0?n:100,min:(r=e.params.min)!==null&&r!==void 0?r:0}),value:e.value,viewProps:e.viewProps})}function ei(e){return e.view==="graph"}const Ju=A({id:"monitor-number",type:"monitor",accept:(e,t)=>{if(typeof e!="number")return null;const n=x(t,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:e,params:n}:null},binding:{defaultBufferSize:e=>ei(e)?64:1,reader:e=>is},controller:e=>ei(e.params)?Xu(e):Yu(e),api:e=>e.controller.valueController instanceof eo?new Gu(e.controller):null}),Zu=A({id:"monitor-string",type:"monitor",accept:(e,t)=>{if(typeof e!="string")return null;const n=x(t,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Ss},controller:e=>{var t;const n=e.value;return n.rawValue.length>1||e.params.multiline?new hr(e.document,{formatter:Sn,rows:(t=e.params.rows)!==null&&t!==void 0?t:_e.monitor.defaultRows,value:n,viewProps:e.viewProps}):new fr(e.document,{formatter:Sn,value:n,viewProps:e.viewProps})}});class Qu{constructor(){this.map_=new Map}get(t){var n;return(n=this.map_.get(t))!==null&&n!==void 0?n:null}has(t){return this.map_.has(t)}add(t,n){return this.map_.set(t,n),t.viewProps.handleDispose(()=>{this.map_.delete(t)}),n}}class tp{constructor(t){this.target=t.target,this.reader_=t.reader,this.writer_=t.writer}read(){return this.reader_(this.target.read())}write(t){this.writer_(this.target,t)}inject(t){this.write(this.reader_(t))}}function ep(e,t){var n;const r=e.accept(t.target.read(),t.params);if(E(r))return null;const i={target:t.target,initialValue:r.initialValue,params:r.params},s=x(t.params,p=>({disabled:p.optional.boolean,hidden:p.optional.boolean,label:p.optional.string,tag:p.optional.string})),o=e.binding.reader(i),a=e.binding.constraint?e.binding.constraint(i):void 0,l=new tp({reader:o,target:t.target,writer:e.binding.writer(i)}),c=new Ba(C(o(r.initialValue),{constraint:a,equals:e.binding.equals}),l),u=e.controller({constraint:a,document:t.document,initialValue:r.initialValue,params:r.params,value:c,viewProps:nt.create({disabled:s?.disabled,hidden:s?.hidden})});return new Qa(t.document,{blade:Ft(),props:v.fromObject({label:"label"in t.params?(n=s?.label)!==null&&n!==void 0?n:null:t.target.key}),tag:s?.tag,value:c,valueController:u})}class np{constructor(t){this.target=t.target,this.reader_=t.reader}read(){return this.reader_(this.target.read())}}function rp(e,t){return t===0?new Dl:new Ml(e,t??_e.monitor.defaultInterval)}function ip(e,t){var n,r,i;const s=e.accept(t.target.read(),t.params);if(E(s))return null;const o={target:t.target,initialValue:s.initialValue,params:s.params},a=x(t.params,h=>({bufferSize:h.optional.number,disabled:h.optional.boolean,hidden:h.optional.boolean,interval:h.optional.number,label:h.optional.string})),l=e.binding.reader(o),c=(r=(n=a?.bufferSize)!==null&&n!==void 0?n:e.binding.defaultBufferSize&&e.binding.defaultBufferSize(s.params))!==null&&r!==void 0?r:1,u=new il({binding:new np({reader:l,target:t.target}),bufferSize:c,ticker:rp(t.document,a?.interval)}),p=e.controller({document:t.document,params:s.params,value:u,viewProps:nt.create({disabled:a?.disabled,hidden:a?.hidden})});return p.viewProps.bindDisabled(u.ticker),p.viewProps.handleDispose(()=>{u.ticker.dispose()}),new ol(t.document,{blade:Ft(),props:v.fromObject({label:"label"in t.params?(i=a?.label)!==null&&i!==void 0?i:null:t.target.key}),value:u,valueController:p})}class sp{constructor(t){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=t}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t,n){if(!Yl(n.core))throw P.notCompatible(t,n.id);n.type==="blade"?this.pluginsMap_.blades.unshift(n):n.type==="input"?this.pluginsMap_.inputs.unshift(n):n.type==="monitor"&&this.pluginsMap_.monitors.unshift(n)}createInput_(t,n,r){return this.pluginsMap_.inputs.reduce((i,s)=>i??ep(s,{document:t,target:n,params:r}),null)}createMonitor_(t,n,r){return this.pluginsMap_.monitors.reduce((i,s)=>i??ip(s,{document:t,params:r,target:n}),null)}createBinding(t,n,r){const i=n.read();if(E(i))throw new P({context:{key:n.key},type:"nomatchingcontroller"});const s=this.createInput_(t,n,r);if(s)return s;const o=this.createMonitor_(t,n,r);if(o)return o;throw new P({context:{key:n.key},type:"nomatchingcontroller"})}createBlade(t,n){const r=this.pluginsMap_.blades.reduce((i,s)=>i??Ll(s,{document:t,params:n}),null);if(!r)throw new P({type:"nomatchingview",context:{params:n}});return r}createInputBindingApi_(t){const n=this.pluginsMap_.inputs.reduce((r,i)=>{var s,o;return r||((o=(s=i.api)===null||s===void 0?void 0:s.call(i,{controller:t}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(t,n??new ee(t))}createMonitorBindingApi_(t){const n=this.pluginsMap_.monitors.reduce((r,i)=>{var s,o;return r||((o=(s=i.api)===null||s===void 0?void 0:s.call(i,{controller:t}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(t,n??new ee(t))}createBindingApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(tl(t))return this.createInputBindingApi_(t);if(al(t))return this.createMonitorBindingApi_(t);throw P.shouldNeverHappen()}createApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(Za(t))return this.createBindingApi(t);const n=this.pluginsMap_.blades.reduce((r,i)=>r??i.api({controller:t,pool:this}),null);if(!n)throw P.shouldNeverHappen();return this.apiCache_.add(t,n)}}const op=new Qu;function ap(){const e=new sp(op);return[Ru,Nu,$u,Hu,Cu,bu,_u,du,Ql,qu,Zu,Ju,dl,Pl,Cs].forEach(t=>{e.register("core",t)}),e}class lp extends xt{constructor(t){super(t),this.emitter_=new k,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new ce(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}}class cp extends xt{}class up extends xt{constructor(t){super(t),this.emitter_=new k,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new ce(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}}class pp extends xt{constructor(t){super(t),this.emitter_=new k,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new ce(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(t){this.controller.valueController.props.set("formatter",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,n){const r=n.bind(this);return this.emitter_.on(t,i=>{r(i)},{key:n}),this}off(t,n){return this.emitter_.off(t,n),this}}const dp=(function(){return{id:"list",type:"blade",core:jt,accept(e){const t=x(e,n=>({options:n.required.custom(he),value:n.required.raw,view:n.required.constant("list"),label:n.optional.string}));return t?{params:t}:null},controller(e){const t=new de(nr(e.params.options)),n=C(e.params.value,{constraint:t}),r=new ut(e.document,{props:new v({options:t.values.value("options")}),value:n,viewProps:e.viewProps});return new wt(e.document,{blade:e.blade,props:v.fromObject({label:e.params.label}),value:n,valueController:r})},api(e){return!(e.controller instanceof wt)||!(e.controller.valueController instanceof ut)?null:new lp(e.controller)}}})();class hp extends ys{constructor(t,n){super(t,n)}get element(){return this.controller.view.element}}class fp extends xn{constructor(t,n){super(t,{expanded:n.expanded,blade:n.blade,props:n.props,root:!0,viewProps:n.viewProps})}}const ni=_("spr");class mp{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(ni()),n.viewProps.bindClassModifiers(this.element);const r=t.createElement("hr");r.classList.add(ni("r")),this.element.appendChild(r)}}class ri extends He{constructor(t,n){super(Object.assign(Object.assign({},n),{view:new mp(t,{viewProps:n.viewProps})}))}}const vp={id:"separator",type:"blade",core:jt,accept(e){const t=x(e,n=>({view:n.required.constant("separator")}));return t?{params:t}:null},controller(e){return new ri(e.document,{blade:e.blade,viewProps:e.viewProps})},api(e){return e.controller instanceof ri?new cp(e.controller):null}},_p={id:"slider",type:"blade",core:jt,accept(e){const t=x(e,n=>({max:n.required.number,min:n.required.number,view:n.required.constant("slider"),format:n.optional.function,label:n.optional.string,value:n.optional.number}));return t?{params:t}:null},controller(e){var t,n;const r=(t=e.params.value)!==null&&t!==void 0?t:0,i=new le({max:e.params.max,min:e.params.min}),s=C(r,{constraint:i}),o=new Ne(e.document,Object.assign(Object.assign({},Ts({formatter:(n=e.params.format)!==null&&n!==void 0?n:Ra,keyScale:C(1),max:i.values.value("max"),min:i.values.value("min"),pointerScale:as(e.params,r)})),{parser:Q,value:s,viewProps:e.viewProps}));return new wt(e.document,{blade:e.blade,props:v.fromObject({label:e.params.label}),value:s,valueController:o})},api(e){return!(e.controller instanceof wt)||!(e.controller.valueController instanceof Ne)?null:new up(e.controller)}},bp=(function(){return{id:"text",type:"blade",core:jt,accept(e){const t=x(e,n=>({parse:n.required.function,value:n.required.raw,view:n.required.constant("text"),format:n.optional.function,label:n.optional.string}));return t?{params:t}:null},controller(e){var t;const n=C(e.params.value),r=new ne(e.document,{parser:e.params.parse,props:v.fromObject({formatter:(t=e.params.format)!==null&&t!==void 0?t:(i=>String(i))}),value:n,viewProps:e.viewProps});return new wt(e.document,{blade:e.blade,props:v.fromObject({label:e.params.label}),value:n,valueController:r})},api(e){return!(e.controller instanceof wt)||!(e.controller.valueController instanceof ne)?null:new pp(e.controller)}}})();function gp(e){const t=e.createElement("div");return t.classList.add(_("dfw")()),e.body&&e.body.appendChild(t),t}function wp(e,t,n){if(e.querySelector(`style[data-tp-style=${t}]`))return;const r=e.createElement("style");r.dataset.tpStyle=t,r.textContent=n,e.head.appendChild(r)}class vv extends hp{constructor(t){var n,r;const i=t??{},s=(n=i.document)!==null&&n!==void 0?n:Ka(),o=ap(),a=new fp(s,{expanded:i.expanded,blade:Ft(),props:v.fromObject({title:i.title}),viewProps:nt.create()});super(a,o),this.pool_=o,this.containerElem_=(r=i.container)!==null&&r!==void 0?r:gp(s),this.containerElem_.appendChild(this.element),this.doc_=s,this.usesDefaultWrapper_=!i.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw P.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw P.alreadyDisposed();if(this.usesDefaultWrapper_){const n=t.parentElement;n&&n.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){t.css&&wp(this.document,`plugin-${t.id}`,t.css),("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach(r=>{this.pool_.register(t.id,r)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:"";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:"";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[dp,vp,_p,Cs,bp]})}}new ws("4.0.5");const m=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,y=globalThis,bt="10.38.0";function Ke(){return qe(y),y}function qe(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||bt,t[bt]=t[bt]||{}}function Ut(e,t,n=y){const r=n.__SENTRY__=n.__SENTRY__||{},i=r[bt]=r[bt]||{};return i[e]||(i[e]=t())}const yp=["debug","info","warn","error","log","assert","trace"],Ep="Sentry Logger ",Be={};function Ht(e){if(!("console"in y))return e();const t=y.console,n={},r=Object.keys(Be);r.forEach(i=>{const s=Be[i];n[i]=t[i],t[i]=s});try{return e()}finally{r.forEach(i=>{t[i]=n[i]})}}function Cp(){vr().enabled=!0}function xp(){vr().enabled=!1}function no(){return vr().enabled}function Pp(...e){mr("log",...e)}function Sp(...e){mr("warn",...e)}function kp(...e){mr("error",...e)}function mr(e,...t){m&&no()&&Ht(()=>{y.console[e](`${Ep}[${e}]:`,...t)})}function vr(){return m?Ut("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const f={enable:Cp,disable:xp,isEnabled:no,log:Pp,warn:Sp,error:kp},ro=50,Et="?",ii=/\(error: (.*)\)/,si=/captureMessage|captureException/;function io(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,i=0)=>{const s=[],o=n.split(`
`);for(let a=r;a<o.length;a++){let l=o[a];l.length>1024&&(l=l.slice(0,1024));const c=ii.test(l)?l.replace(ii,"$1"):l;if(!c.match(/\S*Error: /)){for(const u of t){const p=u(c);if(p){s.push(p);break}}if(s.length>=ro+i)break}}return Ip(s.slice(i))}}function Tp(e){return Array.isArray(e)?io(...e):e}function Ip(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(Ce(t).function||"")&&t.pop(),t.reverse(),si.test(Ce(t).function||"")&&(t.pop(),si.test(Ce(t).function||"")&&t.pop()),t.slice(0,ro).map(n=>({...n,filename:n.filename||Ce(t).filename,function:n.function||Et}))}function Ce(e){return e[e.length-1]||{}}const hn="<anonymous>";function pt(e){try{return!e||typeof e!="function"?hn:e.name||hn}catch{return hn}}function oi(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}function so(e){return"__v_isVNode"in e&&e.__v_isVNode?"[VueVNode]":"[VueViewModel]"}const Te={},ai={};function St(e,t){Te[e]=Te[e]||[],Te[e].push(t)}function kt(e,t){if(!ai[e]){ai[e]=!0;try{t()}catch(n){m&&f.error(`Error while instrumenting ${e}`,n)}}}function H(e,t){const n=e&&Te[e];if(n)for(const r of n)try{r(t)}catch(i){m&&f.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${pt(r)}
Error:`,i)}}let fn=null;function Vp(e){const t="error";St(t,e),kt(t,Op)}function Op(){fn=y.onerror,y.onerror=function(e,t,n,r,i){return H("error",{column:r,error:i,line:n,msg:e,url:t}),fn?fn.apply(this,arguments):!1},y.onerror.__SENTRY_INSTRUMENTED__=!0}let mn=null;function Ap(e){const t="unhandledrejection";St(t,e),kt(t,Rp)}function Rp(){mn=y.onunhandledrejection,y.onunhandledrejection=function(e){return H("unhandledrejection",e),mn?mn.apply(this,arguments):!0},y.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const oo=Object.prototype.toString;function Ge(e){switch(oo.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return dt(e,Error)}}function zt(e,t){return oo.call(e)===`[object ${t}]`}function ao(e){return zt(e,"ErrorEvent")}function li(e){return zt(e,"DOMError")}function Lp(e){return zt(e,"DOMException")}function J(e){return zt(e,"String")}function _r(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function We(e){return e===null||_r(e)||typeof e!="object"&&typeof e!="function"}function se(e){return zt(e,"Object")}function Ye(e){return typeof Event<"u"&&dt(e,Event)}function Dp(e){return typeof Element<"u"&&dt(e,Element)}function Mp(e){return zt(e,"RegExp")}function be(e){return!!(e?.then&&typeof e.then=="function")}function Np(e){return se(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function dt(e,t){try{return e instanceof t}catch{return!1}}function lo(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue||e.__v_isVNode))}function co(e){return typeof Request<"u"&&dt(e,Request)}const br=y,Bp=80;function uo(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,i=[];let s=0,o=0;const a=" > ",l=a.length;let c;const u=Array.isArray(t)?t:t.keyAttrs,p=!Array.isArray(t)&&t.maxStringLength||Bp;for(;n&&s++<r&&(c=jp(n,u),!(c==="html"||s>1&&o+i.length*l+c.length>=p));)i.push(c),o+=c.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function jp(e,t){const n=e,r=[];if(!n?.tagName)return"";if(br.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=t?.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(i?.length)i.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&J(o)){const a=o.split(/\s+/);for(const l of a)r.push(`.${l}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function gr(){try{return br.document.location.href}catch{return""}}function Fp(e){if(!br.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function M(e,t,n){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const i=n(r);typeof i=="function"&&po(i,r);try{e[t]=i}catch{m&&f.log(`Failed to replace method "${t}" in object`,e)}}function ht(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{m&&f.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function po(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,ht(e,"__sentry_original__",t)}catch{}}function wr(e){return e.__sentry_original__}function ho(e){if(Ge(e))return{message:e.message,name:e.name,stack:e.stack,...ui(e)};if(Ye(e)){const t={type:e.type,target:ci(e.target),currentTarget:ci(e.currentTarget),...ui(e)};return typeof CustomEvent<"u"&&dt(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function ci(e){try{return Dp(e)?uo(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function ui(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function $p(e){const t=Object.keys(ho(e));return t.sort(),t[0]?t.join(", "):"[object has no keys]"}let Vt;function Xe(e){if(Vt!==void 0)return Vt?Vt(e):e();const t=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__"),n=y;return t in n&&typeof n[t]=="function"?(Vt=n[t],Vt(e)):(Vt=null,e())}function je(){return Xe(()=>Math.random())}function Je(){return Xe(()=>Date.now())}function Tn(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function pi(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const i=e[r];try{lo(i)?n.push(so(i)):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Ie(e,t,n=!1){return J(e)?Mp(t)?t.test(e):J(t)?n?e===t:e.includes(t):!1:!1}function Ze(e,t=[],n=!1){return t.some(r=>Ie(e,r,n))}function Up(){const e=y;return e.crypto||e.msCrypto}let vn;function Hp(){return je()*16}function $(e=Up()){try{if(e?.randomUUID)return Xe(()=>e.randomUUID()).replace(/-/g,"")}catch{}return vn||(vn="10000000100040008000"+1e11),vn.replace(/[018]/g,t=>(t^(Hp()&15)>>t/4).toString(16))}function fo(e){return e.exception?.values?.[0]}function vt(e){const{message:t,event_id:n}=e;if(t)return t;const r=fo(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function In(e,t,n){const r=e.exception=e.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=t||""),s.type||(s.type="Error")}function Lt(e,t){const n=fo(e);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...t},t&&"data"in t){const s={...i?.data,...t.data};n.mechanism.data=s}}function di(e){if(zp(e))return!0;try{ht(e,"__sentry_captured__",!0)}catch{}return!1}function zp(e){try{return e.__sentry_captured__}catch{}}const mo=1e3;function ge(){return Je()/mo}function Kp(){const{performance:e}=y;if(!e?.now||!e.timeOrigin)return ge;const t=e.timeOrigin;return()=>(t+Xe(()=>e.now()))/mo}let hi;function Z(){return(hi??(hi=Kp()))()}function qp(e){const t=Z(),n={sid:$(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Wp(n)};return e&&Dt(n,e),n}function Dt(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Z(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:$()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Gp(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),Dt(e,n)}function Wp(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function we(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=we(r[i],t[i],n-1));return r}function fi(){return $()}function vo(){return $().substring(16)}const Vn="_sentrySpan";function mi(e,t){t?ht(e,Vn,t):delete e[Vn]}function vi(e){return e[Vn]}const Yp=100;class et{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:fi(),sampleRand:je()}}clone(){const t=new et;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,t._conversationId=this._conversationId,mi(t,vi(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Dt(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setConversationId(t){return this._conversationId=t||void 0,this._notifyScopeListeners(),this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this.setTags({[t]:n})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,n){return this.setAttributes({[t]:n})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof et?n.getScopeData():se(n)?t:void 0,{tags:i,attributes:s,extra:o,user:a,contexts:l,level:c,fingerprint:u=[],propagationContext:p,conversationId:h}=r||{};return this._tags={...this._tags,...i},this._attributes={...this._attributes,...s},this._extra={...this._extra,...o},this._contexts={...this._contexts,...l},a&&Object.keys(a).length&&(this._user=a),c&&(this._level=c),u.length&&(this._fingerprint=u),p&&(this._propagationContext=p),h&&(this._conversationId=h),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,this._conversationId=void 0,mi(this,void 0),this._attachments=[],this.setPropagationContext({traceId:fi(),sampleRand:je()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:Yp;if(r<=0)return this;const i={timestamp:ge(),...t,message:t.message?Tn(t.message,2048):t.message};return this._breadcrumbs.push(i),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:vi(this),conversationId:this._conversationId}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=we(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n?.event_id||$();if(!this._client)return m&&f.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:i,...n,event_id:r},this),r}captureMessage(t,n,r){const i=r?.event_id||$();if(!this._client)return m&&f.warn("No client configured on scope - will not capture message!"),i;const s=r?.syntheticException??new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:s,...r,event_id:i},this),i}captureEvent(t,n){const r=n?.event_id||$();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(m&&f.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function Xp(){return Ut("defaultCurrentScope",()=>new et)}function Jp(){return Ut("defaultIsolationScope",()=>new et)}class Zp{constructor(t,n){let r;t?r=t:r=new et;let i;n?i=n:i=new et,this._stack=[{scope:r}],this._isolationScope=i}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(i){throw this._popScope(),i}return be(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Mt(){const e=Ke(),t=qe(e);return t.stack=t.stack||new Zp(Xp(),Jp())}function Qp(e){return Mt().withScope(e)}function td(e,t){const n=Mt();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function _i(e){return Mt().withScope(()=>e(Mt().getIsolationScope()))}function ed(){return{withIsolationScope:_i,withScope:Qp,withSetScope:td,withSetIsolationScope:(e,t)=>_i(t),getCurrentScope:()=>Mt().getScope(),getIsolationScope:()=>Mt().getIsolationScope()}}function yr(e){const t=qe(e);return t.acs?t.acs:ed()}function rt(){const e=Ke();return yr(e).getCurrentScope()}function Kt(){const e=Ke();return yr(e).getIsolationScope()}function nd(){return Ut("globalScope",()=>new et)}function rd(...e){const t=Ke(),n=yr(t);if(e.length===2){const[r,i]=e;return r?n.withSetScope(r,i):n.withScope(i)}return n.withScope(e[0])}function I(){return rt().getClient()}function id(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:i}=t,s={trace_id:n,span_id:i||vo()};return r&&(s.parent_span_id=r),s}const sd="sentry.source",od="sentry.sample_rate",ad="sentry.previous_trace_sample_rate",ld="sentry.op",cd="sentry.origin",_o="sentry.profile_id",bo="sentry.exclusive_time",ud="gen_ai.conversation.id",pd=0,dd=1,hd="_sentryScope",fd="_sentryIsolationScope";function md(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function go(e){const t=e;return{scope:t[hd],isolationScope:md(t[fd])}}const vd="sentry-",_d=/^sentry-/;function bd(e){const t=gd(e);if(!t)return;const n=Object.entries(t).reduce((r,[i,s])=>{if(i.match(_d)){const o=i.slice(vd.length);r[o]=s}return r},{});if(Object.keys(n).length>0)return n}function gd(e){if(!(!e||!J(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=bi(n);return Object.entries(r).forEach(([i,s])=>{t[i]=s}),t},{}):bi(e)}function bi(e){return e.split(",").map(t=>{const n=t.indexOf("=");if(n===-1)return[];const r=t.slice(0,n),i=t.slice(n+1);return[r,i].map(s=>{try{return decodeURIComponent(s.trim())}catch{return}})}).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}const wd=/^o(\d+)\./,yd=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)((?:\[[:.%\w]+\]|[\w.-]+))(?::(\d+))?\/(.+)/;function Ed(e){return e==="http"||e==="https"}function ye(e,t=!1){const{host:n,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function Cd(e){const t=yd.exec(e);if(!t){Ht(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,i="",s="",o="",a=""]=t.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const p=c.match(/^\d+/);p&&(c=p[0])}return wo({host:s,pass:i,path:l,projectId:c,port:o,protocol:n,publicKey:r})}function wo(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function xd(e){if(!m)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(f.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?Ed(r)?t&&isNaN(parseInt(t,10))?(f.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(f.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(f.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Pd(e){return e.match(wd)?.[1]}function Sd(e){const t=e.getOptions(),{host:n}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):n&&(r=Pd(n)),r}function kd(e){const t=typeof e=="string"?Cd(e):wo(e);if(!(!t||!xd(t)))return t}function Td(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const yo=1;let gi=!1;function Id(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),i=r?t:Er(e).parent_span_id,s=go(e).scope,o=r?s?.getPropagationContext().propagationSpanId||vo():t;return{parent_span_id:i,span_id:o,trace_id:n}}function Vd(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...i},attributes:s})=>({span_id:t,trace_id:n,sampled:r===yo,attributes:s,...i}))}function wi(e){return typeof e=="number"?yi(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?yi(e.getTime()):Z()}function yi(e){return e>9999999999?e/1e3:e}function Er(e){if(Ad(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(Od(e)){const{attributes:r,startTime:i,name:s,endTime:o,status:a,links:l}=e,c="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:n,data:r,description:s,parent_span_id:c,start_timestamp:wi(i),timestamp:wi(o)||void 0,status:Ld(a),op:r[ld],origin:r[cd],links:Vd(l)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function Od(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function Ad(e){return typeof e.getSpanJSON=="function"}function Rd(e){const{traceFlags:t}=e.spanContext();return t===yo}function Ld(e){if(!(!e||e.code===pd))return e.code===dd?"ok":e.message||"internal_error"}const Dd="_sentryRootSpan";function Eo(e){return e[Dd]||e}function Ei(){gi||(Ht(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),gi=!0)}function Md(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=I()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function Ci(e){f.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function xi(e,t){if(!t?.length||!e.description)return!1;for(const n of t){if(Bd(n)){if(Ie(e.description,n))return m&&Ci(e),!0;continue}if(!n.name&&!n.op)continue;const r=n.name?Ie(e.description,n.name):!0,i=n.op?e.op&&Ie(e.op,n.op):!0;if(r&&i)return m&&Ci(e),!0}return!1}function Nd(e,t){const n=t.parent_span_id,r=t.span_id;if(n)for(const i of e)i.parent_span_id===r&&(i.parent_span_id=n)}function Bd(e){return typeof e=="string"||e instanceof RegExp}const Cr="production",jd="_frozenDsc";function Co(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},i={environment:n.environment||Cr,release:n.release,public_key:r,trace_id:e,org_id:Sd(t)};return t.emit("createDsc",i),i}function Fd(e,t){const n=t.getPropagationContext();return n.dsc||Co(n.traceId,e)}function $d(e){const t=I();if(!t)return{};const n=Eo(e),r=Er(n),i=r.data,s=n.spanContext().traceState,o=s?.get("sentry.sample_rate")??i[od]??i[ad];function a(w){return(typeof o=="number"||typeof o=="string")&&(w.sample_rate=`${o}`),w}const l=n[jd];if(l)return a(l);const c=s?.get("sentry.dsc"),u=c&&bd(c);if(u)return a(u);const p=Co(e.spanContext().traceId,t),h=i[sd],d=r.description;return h!=="url"&&d&&(p.transaction=d),Md()&&(p.sampled=String(Rd(n)),p.sample_rand=s?.get("sentry.sample_rand")??go(n).scope?.getPropagationContext().sampleRand.toString()),a(p),t.emit("createDsc",p,n),p}function W(e,t=100,n=1/0){try{return On("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function xo(e,t=3,n=100*1024){const r=W(e,t);return Kd(r)>n?xo(e,t-1,n):r}function On(e,t,n=1/0,r=1/0,i=qd()){const[s,o]=i;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=Ud(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const l=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(l===0)return a.replace("object ","");if(s(t))return"[Circular ~]";const c=t;if(c&&typeof c.toJSON=="function")try{const d=c.toJSON();return On("",d,l-1,r,i)}catch{}const u=Array.isArray(t)?[]:{};let p=0;const h=ho(t);for(const d in h){if(!Object.prototype.hasOwnProperty.call(h,d))continue;if(p>=r){u[d]="[MaxProperties ~]";break}const w=h[d];u[d]=On(d,w,l-1,r,i),p++}return o(t),u}function Ud(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(lo(t))return so(t);if(Np(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${pt(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=Hd(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function Hd(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function zd(e){return~-encodeURI(e).split(/%..|./).length}function Kd(e){return zd(JSON.stringify(e))}function qd(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function qt(e,t=[]){return[e,t]}function Gd(e,t){const[n,r]=e;return[n,[...r,t]]}function An(e,t){const n=e[1];for(const r of n){const i=r[0].type;if(t(r,i))return!0}return!1}function Wd(e,t){return An(e,(n,r)=>t.includes(r))}function Rn(e){const t=qe(y);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function Yd(e){const[t,n]=e;let r=JSON.stringify(t);function i(s){typeof r=="string"?r=typeof s=="string"?r+s:[Rn(r),s]:r.push(typeof s=="string"?Rn(s):s)}for(const s of n){const[o,a]=s;if(i(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)i(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(W(a))}i(l)}}return typeof r=="string"?r:Xd(r)}function Xd(e){const t=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}function Jd(e){const t=typeof e.data=="string"?Rn(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const Zd={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function Pi(e){return Zd[e]}function Po(e){if(!e?.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Qd(e,t,n,r){const i=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:ye(r)},...i&&{trace:i}}}function th(e,t){if(!t)return e;const n=e.sdk||{};return e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...e.sdk?.integrations||[],...t.integrations||[]],packages:[...e.sdk?.packages||[],...t.packages||[]],settings:e.sdk?.settings||t.settings?{...e.sdk?.settings,...t.settings}:void 0},e}function eh(e,t,n,r){const i=Po(n),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&t&&{dsn:ye(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return qt(s,[o])}function nh(e,t,n,r){const i=Po(n),s=e.type&&e.type!=="replay_event"?e.type:"event";th(e,n?.sdk);const o=Qd(e,i,r,t);return delete e.sdkProcessingMetadata,qt(o,[[{type:s},e]])}const _n=0,Si=1,ki=2;function Qe(e){return new oe(t=>{t(e)})}function xr(e){return new oe((t,n)=>{n(e)})}class oe{constructor(t){this._state=_n,this._handlers=[],this._runExecutor(t)}then(t,n){return new oe((r,i)=>{this._handlers.push([!1,s=>{if(!t)r(s);else try{r(t(s))}catch(o){i(o)}},s=>{if(!n)i(s);else try{r(n(s))}catch(o){i(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new oe((n,r)=>{let i,s;return this.then(o=>{s=!1,i=o,t&&t()},o=>{s=!0,i=o,t&&t()}).then(()=>{if(s){r(i);return}n(i)})})}_executeHandlers(){if(this._state===_n)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Si&&n[1](this._value),this._state===ki&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(s,o)=>{if(this._state===_n){if(be(o)){o.then(r,i);return}this._state=s,this._value=o,this._executeHandlers()}},r=s=>{n(Si,s)},i=s=>{n(ki,s)};try{t(r,i)}catch(s){i(s)}}}function rh(e,t,n,r=0){try{const i=Ln(t,n,e,r);return be(i)?i:Qe(i)}catch(i){return xr(i)}}function Ln(e,t,n,r){const i=n[r];if(!e||!i)return e;const s=i({...e},t);return m&&s===null&&f.log(`Event processor "${i.id||"?"}" dropped event`),be(s)?s.then(o=>Ln(o,t,n,r+1)):Ln(s,t,n,r+1)}let mt,Ti,Ii,at;function ih(e){const t=y._sentryDebugIds,n=y._debugIds;if(!t&&!n)return{};const r=t?Object.keys(t):[],i=n?Object.keys(n):[];if(at&&r.length===Ti&&i.length===Ii)return at;Ti=r.length,Ii=i.length,at={},mt||(mt={});const s=(o,a)=>{for(const l of o){const c=a[l],u=mt?.[l];if(u&&at&&c)at[u[0]]=c,mt&&(mt[l]=[u[0],c]);else if(c){const p=e(l);for(let h=p.length-1;h>=0;h--){const w=p[h]?.filename;if(w&&at&&mt){at[w]=c,mt[l]=[w,c];break}}}}};return t&&s(r,t),n&&s(i,n),at}function sh(e,t){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=t;ah(e,t),r&&uh(e,r),ph(e,n),lh(e,i),ch(e,s)}function Vi(e,t){const{extra:n,tags:r,attributes:i,user:s,contexts:o,level:a,sdkProcessingMetadata:l,breadcrumbs:c,fingerprint:u,eventProcessors:p,attachments:h,propagationContext:d,transactionName:w,span:D}=t;Jt(e,"extra",n),Jt(e,"tags",r),Jt(e,"attributes",i),Jt(e,"user",s),Jt(e,"contexts",o),e.sdkProcessingMetadata=we(e.sdkProcessingMetadata,l,2),a&&(e.level=a),w&&(e.transactionName=w),D&&(e.span=D),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),p.length&&(e.eventProcessors=[...e.eventProcessors,...p]),h.length&&(e.attachments=[...e.attachments,...h]),e.propagationContext={...e.propagationContext,...d}}function Jt(e,t,n){e[t]=we(e[t],n,1)}function oh(e,t){const n=nd().getScopeData();return e&&Vi(n,e.getScopeData()),t&&Vi(n,t.getScopeData()),n}function ah(e,t){const{extra:n,tags:r,user:i,contexts:s,level:o,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(i).length&&(e.user={...i,...e.user}),Object.keys(s).length&&(e.contexts={...s,...e.contexts}),o&&(e.level=o),a&&e.type!=="transaction"&&(e.transaction=a)}function lh(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function ch(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function uh(e,t){e.contexts={trace:Id(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:$d(t),...e.sdkProcessingMetadata};const n=Eo(t),r=Er(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function ph(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function dh(e,t,n,r,i,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,l={...t,event_id:t.event_id||n.event_id||$(),timestamp:t.timestamp||ge()},c=n.integrations||e.integrations.map(U=>U.name);hh(l,e),vh(l,c),i&&i.emit("applyFrameMetadata",t),t.type===void 0&&fh(l,e.stackParser);const u=bh(r,n.captureContext);n.mechanism&&Lt(l,n.mechanism);const p=i?i.getEventProcessors():[],h=oh(s,u),d=[...n.attachments||[],...h.attachments];d.length&&(n.attachments=d),sh(l,h);const w=[...p,...h.eventProcessors];return rh(w,l,n).then(U=>(U&&mh(U),typeof o=="number"&&o>0?_h(U,o,a):U))}function hh(e,t){const{environment:n,release:r,dist:i,maxValueLength:s}=t;e.environment=e.environment||n||Cr,!e.release&&r&&(e.release=r),!e.dist&&i&&(e.dist=i);const o=e.request;o?.url&&s&&(o.url=Tn(o.url,s)),s&&e.exception?.values?.forEach(a=>{a.value&&(a.value=Tn(a.value,s))})}function fh(e,t){const n=ih(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(i=>{i.filename&&(i.debug_id=n[i.filename])})})}function mh(e){const t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(i=>{i.debug_id&&(i.abs_path?t[i.abs_path]=i.debug_id:i.filename&&(t[i.filename]=i.debug_id),delete i.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([r,i])=>{n.push({type:"sourcemap",code_file:r,debug_id:i})})}function vh(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function _h(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(i=>({...i,...i.data&&{data:W(i.data,t,n)}}))},...e.user&&{user:W(e.user,t,n)},...e.contexts&&{contexts:W(e.contexts,t,n)},...e.extra&&{extra:W(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=W(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(i=>({...i,...i.data&&{data:W(i.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=W(e.contexts.flags,3,n)),r}function bh(e,t){if(!t)return e;const n=e?e.clone():new et;return n.update(t),n}function gh(e,t){return rt().captureException(e,void 0)}function So(e,t){return rt().captureEvent(e,t)}function Oi(e){const t=Kt(),n=rt(),{userAgent:r}=y.navigator||{},i=qp({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),s=t.getSession();return s?.status==="ok"&&Dt(s,{status:"exited"}),ko(),t.setSession(i),i}function ko(){const e=Kt(),n=rt().getSession()||e.getSession();n&&Gp(n),To(),e.setSession()}function To(){const e=Kt(),t=I(),n=e.getSession();n&&t&&t.captureSession(n)}function Ai(e=!1){if(e){ko();return}To()}const wh="7";function yh(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Eh(e){return`${yh(e)}${e.projectId}/envelope/`}function Ch(e,t){const n={sentry_version:wh};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function xh(e,t,n){return t||`${Eh(e)}?${Ch(e,n)}`}const Ri=[];function Ph(e){const t={};return e.forEach(n=>{const{name:r}=n,i=t[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function Sh(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(i=>{i.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){const i=n(t);r=Array.isArray(i)?i:[i]}else r=t;return Ph(r)}function kh(e,t){const n={};return t.forEach(r=>{r&&Io(e,r,n)}),n}function Li(e,t){for(const n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function Io(e,t,n){if(n[t.name]){m&&f.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,!Ri.includes(t.name)&&typeof t.setupOnce=="function"&&(t.setupOnce(),Ri.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(i,s)=>r(i,s,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),i=Object.assign((s,o)=>r(s,o,e),{id:t.name});e.addEventProcessor(i)}m&&f.log(`Integration installed: ${t.name}`)}function Th(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function Ih(e,t,n,r){const i={};return t?.sdk&&(i.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(i.dsn=ye(r)),qt(i,[Th(e)])}function Vo(e,t){const n=t??Vh(e)??[];if(n.length===0)return;const r=e.getOptions(),i=Ih(n,r._metadata,r.tunnel,e.getDsn());Oo().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(i)}function Vh(e){return Oo().get(e)}function Oo(){return Ut("clientToLogBufferMap",()=>new WeakMap)}function Oh(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function Ah(e,t,n,r){const i={};return t?.sdk&&(i.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(i.dsn=ye(r)),qt(i,[Oh(e)])}function Ao(e,t){const n=t??Rh(e)??[];if(n.length===0)return;const r=e.getOptions(),i=Ah(n,r._metadata,r.tunnel,e.getDsn());Ro().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(i)}function Rh(e){return Ro().get(e)}function Ro(){return Ut("clientToMetricBufferMap",()=>new WeakMap)}const Pr=Symbol.for("SentryBufferFullError");function Sr(e=100){const t=new Set;function n(){return t.size<e}function r(o){t.delete(o)}function i(o){if(!n())return xr(Pr);const a=o();return t.add(a),a.then(()=>r(a),()=>r(a)),a}function s(o){if(!t.size)return Qe(!0);const a=Promise.allSettled(Array.from(t)).then(()=>!0);if(!o)return a;const l=[a,new Promise(c=>setTimeout(()=>c(!1),o))];return Promise.race(l)}return{get $(){return Array.from(t)},add:i,drain:s}}const Lh=60*1e3;function Dh(e,t=Je()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?Lh:r-t}function Mh(e,t){return e[t]||e.all||0}function Nh(e,t,n=Je()){return Mh(e,t)>n}function Bh(e,{statusCode:t,headers:n},r=Je()){const i={...e},s=n?.["x-sentry-rate-limits"],o=n?.["retry-after"];if(s)for(const a of s.trim().split(",")){const[l,c,,,u]=a.split(":",5),p=parseInt(l,10),h=(isNaN(p)?60:p)*1e3;if(!c)i.all=r+h;else for(const d of c.split(";"))d==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(i[d]=r+h):i[d]=r+h}else o?i.all=r+Dh(o,r):t===429&&(i.all=r+60*1e3);return i}const Lo=64;function jh(e,t,n=Sr(e.bufferSize||Lo)){let r={};const i=o=>n.drain(o);function s(o){const a=[];if(An(o,(p,h)=>{const d=Pi(h);Nh(r,d)?e.recordDroppedEvent("ratelimit_backoff",d):a.push(p)}),a.length===0)return Promise.resolve({});const l=qt(o[0],a),c=p=>{if(Wd(l,["client_report"])){m&&f.warn(`Dropping client report. Will not send outcomes (reason: ${p}).`);return}An(l,(h,d)=>{e.recordDroppedEvent(p,Pi(d))})},u=()=>t({body:Yd(l)}).then(p=>(p.statusCode!==void 0&&(p.statusCode<200||p.statusCode>=300)&&m&&f.warn(`Sentry responded with status code ${p.statusCode} to sent event.`),r=Bh(r,p),p),p=>{throw c("network_error"),m&&f.error("Encountered error running transport request:",p),p});return n.add(u).then(p=>p,p=>{if(p===Pr)return m&&f.error("Skipped sending event because buffer is full."),c("queue_overflow"),Promise.resolve({});throw p})}return{send:s,flush:i}}function Fh(e,t,n){const r=[{type:"client_report"},{timestamp:ge(),discarded_events:e}];return qt(t?{dsn:t}:{},[r])}function Do(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function $h(e){const{trace_id:t,parent_span_id:n,span_id:r,status:i,origin:s,data:o,op:a}=e.contexts?.trace??{};return{data:o??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:i,timestamp:e.timestamp,trace_id:t??"",origin:s,profile_id:o?.[_o],exclusive_time:o?.[bo],measurements:e.measurements,is_segment:!0}}function Uh(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[_o]:e.profile_id},...e.exclusive_time&&{[bo]:e.exclusive_time}}}},measurements:e.measurements}}const Di="Not capturing exception because it's already been captured.",Mi="Discarded session because of missing or non-string release",Mo=Symbol.for("SentryInternalError"),No=Symbol.for("SentryDoNotSendEventError"),Hh=5e3;function Ve(e){return{message:e,[Mo]:!0}}function bn(e){return{message:e,[No]:!0}}function Ni(e){return!!e&&typeof e=="object"&&Mo in e}function Bi(e){return!!e&&typeof e=="object"&&No in e}function ji(e,t,n,r,i){let s=0,o,a=!1;e.on(n,()=>{s=0,clearTimeout(o),a=!1}),e.on(t,l=>{s+=r(l),s>=8e5?i(e):a||(a=!0,o=setTimeout(()=>{i(e)},Hh))}),e.on("flush",()=>{i(e)})}class zh{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=Sr(t.transportOptions?.bufferSize??Lo),t.dsn?this._dsn=kd(t.dsn):m&&f.warn("No DSN provided, client will not send events."),this._dsn){const r=xh(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:r})}this._options.enableLogs=this._options.enableLogs??this._options._experiments?.enableLogs,this._options.enableLogs&&ji(this,"afterCaptureLog","flushLogs",Wh,Vo),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&ji(this,"afterCaptureMetric","flushMetrics",Gh,Ao)}captureException(t,n,r){const i=$();if(di(t))return m&&f.log(Di),i;const s={event_id:i,...n};return this._process(()=>this.eventFromException(t,s).then(o=>this._captureEvent(o,s,r)).then(o=>o),"error"),s.event_id}captureMessage(t,n,r,i){const s={event_id:$(),...r},o=_r(t)?t:String(t),a=We(t),l=a?this.eventFromMessage(o,n,s):this.eventFromException(t,s);return this._process(()=>l.then(c=>this._captureEvent(c,s,i)),a?"unknown":"error"),s.event_id}captureEvent(t,n,r){const i=$();if(n?.originalException&&di(n.originalException))return m&&f.log(Di),i;const s={event_id:i,...n},o=t.sdkProcessingMetadata||{},a=o.capturedSpanScope,l=o.capturedSpanIsolationScope,c=Fi(t.type);return this._process(()=>this._captureEvent(t,s,a||r,l),c),s.event_id}captureSession(t){this.sendSession(t),Dt(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){const n=this._transport;if(!n)return!0;this.emit("flush");const r=await this._isClientDoneProcessing(t),i=await n.flush(t);return r&&i}async close(t){const n=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];Io(this,t,this._integrations),n||Li(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=nh(t,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])r=Gd(r,Jd(i));this.sendEnvelope(r).then(i=>this.emit("afterSendEvent",t,i))}sendSession(t){const{release:n,environment:r=Cr}=this._options;if("aggregates"in t){const s=t.attrs||{};if(!s.release&&!n){m&&f.warn(Mi);return}s.release=s.release||n,s.environment=s.environment||r,t.attrs=s}else{if(!t.release&&!n){m&&f.warn(Mi);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);const i=eh(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(i)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){const i=`${t}:${n}`;m&&f.log(`Recording outcome: "${i}"${r>1?` (${r} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+r}}on(t,n){const r=this._hooks[t]=this._hooks[t]||new Set,i=(...s)=>n(...s);return r.add(i),()=>{r.delete(i)}}emit(t,...n){const r=this._hooks[t];r&&r.forEach(i=>i(...n))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(n){return m&&f.error("Error while sending envelope:",n),{}}return m&&f.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=kh(this,t),Li(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",i=!1;const s=n.exception?.values;if(s){i=!0,r=!1;for(const l of s)if(l.mechanism?.handled===!1){r=!0;break}}const o=t.status==="ok";(o&&t.errors===0||o&&r)&&(Dt(t,{...r&&{status:"crashed"},errors:t.errors||Number(i||r)}),this.captureSession(t))}async _isClientDoneProcessing(t){let n=0;for(;!t||n<t;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,i){const s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o?.length&&(n.integrations=o),this.emit("preprocessEvent",t,n),t.type||i.setLastEventId(t.event_id||n.event_id),dh(s,t,n,r,this,i).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:id(r),...a.contexts};const l=Fd(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:l,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=rt(),i=Kt()){return m&&Dn(t)&&f.log(`Captured error event \`${Do(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,i).then(s=>s.event_id,s=>{m&&(Bi(s)?f.log(s.message):Ni(s)?f.warn(s.message):f.warn(s))})}_processEvent(t,n,r,i){const s=this.getOptions(),{sampleRate:o}=s,a=Bo(t),l=Dn(t),u=`before send for type \`${t.type||"error"}\``,p=typeof o>"u"?void 0:Td(o);if(l&&typeof p=="number"&&je()>p)return this.recordDroppedEvent("sample_rate","error"),xr(bn(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const h=Fi(t.type);return this._prepareEvent(t,n,r,i).then(d=>{if(d===null)throw this.recordDroppedEvent("event_processor",h),bn("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return d;const D=qh(this,s,d,n);return Kh(D,u)}).then(d=>{if(d===null){if(this.recordDroppedEvent("before_send",h),a){const en=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",en)}throw bn(`${u} returned \`null\`, will not send event.`)}const w=r.getSession()||i.getSession();if(l&&w&&this._updateSessionFromEvent(w,d),a){const U=d.sdkProcessingMetadata?.spanCountBeforeProcessing||0,en=d.spans?d.spans.length:0,Vr=U-en;Vr>0&&this.recordDroppedEvent("before_send","span",Vr)}const D=d.transaction_info;if(a&&D&&d.transaction!==t.transaction){const U="custom";d.transaction_info={...D,source:U}}return this.sendEvent(d,n),d}).then(null,d=>{throw Bi(d)||Ni(d)?d:(this.captureException(d,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:d}),Ve(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${d}`))})}_process(t,n){this._numProcessing++,this._promiseBuffer.add(t).then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r===Pr&&this.recordDroppedEvent("queue_overflow",n),r))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{const[i,s]=n.split(":");return{reason:i,category:s,quantity:r}})}_flushOutcomes(){m&&f.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){m&&f.log("No outcomes to send");return}if(!this._dsn){m&&f.log("No dsn provided, will not send outcomes");return}m&&f.log("Sending outcomes:",t);const n=Fh(t,this._options.tunnel&&ye(this._dsn));this.sendEnvelope(n)}}function Fi(e){return e==="replay_event"?"replay":e||"error"}function Kh(e,t){const n=`${t} must return \`null\` or a valid event.`;if(be(e))return e.then(r=>{if(!se(r)&&r!==null)throw Ve(n);return r},r=>{throw Ve(`${t} rejected with ${r}`)});if(!se(e)&&e!==null)throw Ve(n);return e}function qh(e,t,n,r){const{beforeSend:i,beforeSendTransaction:s,beforeSendSpan:o,ignoreSpans:a}=t;let l=n;if(Dn(l)&&i)return i(l,r);if(Bo(l)){if(o||a){const c=$h(l);if(a?.length&&xi(c,a))return null;if(o){const u=o(c);u?l=we(n,Uh(u)):Ei()}if(l.spans){const u=[],p=l.spans;for(const d of p){if(a?.length&&xi(d,a)){Nd(p,d);continue}if(o){const w=o(d);w?u.push(w):(Ei(),u.push(d))}else u.push(d)}const h=l.spans.length-u.length;h&&e.recordDroppedEvent("before_send","span",h),l.spans=u}}if(s){if(l.spans){const c=l.spans.length;l.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:c}}return s(l,r)}}return l}function Dn(e){return e.type===void 0}function Bo(e){return e.type==="transaction"}function Gh(e){let t=0;return e.name&&(t+=e.name.length*2),t+=8,t+jo(e.attributes)}function Wh(e){let t=0;return e.message&&(t+=e.message.length*2),t+jo(e.attributes)}function jo(e){if(!e)return 0;let t=0;return Object.values(e).forEach(n=>{Array.isArray(n)?t+=n.length*$i(n[0]):We(n)?t+=$i(n):t+=100}),t}function $i(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function Yh(e){return Ge(e)&&"__sentry_fetch_url_host__"in e&&typeof e.__sentry_fetch_url_host__=="string"}function Ui(e){return Yh(e)?`${e.message} (${e.__sentry_fetch_url_host__})`:e.message}function Xh(e,t){t.debug===!0&&(m?f.enable():Ht(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),rt().update(t.initialScope);const r=new e(t);return Jh(r),r.init(),r}function Jh(e){rt().setClient(e)}function gn(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function Zh(e,t=!0){if(e.startsWith("data:")){const n=e.match(/^data:([^;,]+)/),r=n?n[1]:"text/plain",i=e.includes(";base64,"),s=e.indexOf(",");let o="";if(t&&s!==-1){const a=e.slice(s+1);o=a.length>10?`${a.slice(0,10)}... [truncated]`:a}return`data:${r}${i?",base64":""}${o?`,${o}`:""}`}return e}function Qh(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function tf(e,t,n=[t],r="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map(s=>({name:`${r}:@sentry/${s}`,version:bt})),version:bt}),e._metadata=i}const ef=100;function Ct(e,t){const n=I(),r=Kt();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=ef}=n.getOptions();if(s<=0)return;const a={timestamp:ge(),...e},l=i?Ht(()=>i(a,t)):a;l!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",l,t),r.addBreadcrumb(l,s))}let Hi;const nf="FunctionToString",zi=new WeakMap,rf=(()=>({name:nf,setupOnce(){Hi=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=wr(this),n=zi.has(I())&&t!==void 0?t:this;return Hi.apply(n,e)}}catch{}},setup(e){zi.set(e,!0)}})),sf=rf,of=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],af="EventFilters",lf=(e={})=>{let t;return{name:af,setup(n){const r=n.getOptions();t=Ki(e,r)},processEvent(n,r,i){if(!t){const s=i.getOptions();t=Ki(e,s)}return uf(n,t)?null:n}}},cf=((e={})=>({...lf(e),name:"InboundFilters"}));function Ki(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:of],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function uf(e,t){if(e.type){if(e.type==="transaction"&&df(e,t.ignoreTransactions))return m&&f.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${vt(e)}`),!0}else{if(pf(e,t.ignoreErrors))return m&&f.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${vt(e)}`),!0;if(vf(e))return m&&f.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${vt(e)}`),!0;if(hf(e,t.denyUrls))return m&&f.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${vt(e)}.
Url: ${Fe(e)}`),!0;if(!ff(e,t.allowUrls))return m&&f.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${vt(e)}.
Url: ${Fe(e)}`),!0}return!1}function pf(e,t){return t?.length?Do(e).some(n=>Ze(n,t)):!1}function df(e,t){if(!t?.length)return!1;const n=e.transaction;return n?Ze(n,t):!1}function hf(e,t){if(!t?.length)return!1;const n=Fe(e);return n?Ze(n,t):!1}function ff(e,t){if(!t?.length)return!0;const n=Fe(e);return n?Ze(n,t):!0}function mf(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Fe(e){try{const n=[...e.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?mf(n):null}catch{return m&&f.error(`Cannot extract url for event ${vt(e)}`),null}}function vf(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function _f(e,t,n,r,i,s){if(!i.exception?.values||!s||!dt(s.originalException,Error))return;const o=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;o&&(i.exception.values=Mn(e,t,r,s.originalException,n,i.exception.values,o,0))}function Mn(e,t,n,r,i,s,o,a){if(s.length>=n+1)return s;let l=[...s];if(dt(r[i],Error)){qi(o,a,r);const c=e(t,r[i]),u=l.length;Gi(c,i,u,a),l=Mn(e,t,n,r[i],i,[c,...l],c,u)}return Fo(r)&&r.errors.forEach((c,u)=>{if(dt(c,Error)){qi(o,a,r);const p=e(t,c),h=l.length;Gi(p,`errors[${u}]`,h,a),l=Mn(e,t,n,c,i,[p,...l],p,h)}}),l}function Fo(e){return Array.isArray(e.errors)}function qi(e,t,n){e.mechanism={handled:!0,type:"auto.core.linked_errors",...Fo(n)&&{is_exception_group:!0},...e.mechanism,exception_id:t}}function Gi(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function bf(e){const t="console";St(t,e),kt(t,gf)}function gf(){"console"in y&&yp.forEach(function(e){e in y.console&&M(y.console,e,function(t){return Be[e]=t,function(...n){H("console",{args:n,level:e}),Be[e]?.apply(y.console,n)}})})}function wf(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const yf="Dedupe",Ef=(()=>{let e;return{name:yf,processEvent(t){if(t.type)return t;try{if(xf(t,e))return m&&f.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),Cf=Ef;function xf(e,t){return t?!!(Pf(e,t)||Sf(e,t)):!1}function Pf(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Uo(e,t)||!$o(e,t))}function Sf(e,t){const n=Wi(t),r=Wi(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Uo(e,t)||!$o(e,t))}function $o(e,t){let n=oi(e),r=oi(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){const s=r[i],o=n[i];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function Uo(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Wi(e){return e.exception?.values?.[0]}const kf="ConversationId",Tf=(()=>({name:kf,setup(e){e.on("spanStart",t=>{const n=rt().getScopeData(),r=Kt().getScopeData(),i=n.conversationId||r.conversationId;i&&t.setAttribute(ud,i)})}})),If=Tf;function Ho(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const ae=y;function Vf(){return"history"in ae&&!!ae.history}function Of(){if(!("fetch"in ae))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function Nn(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Af(){if(typeof EdgeRuntime=="string")return!0;if(!Of())return!1;if(Nn(ae.fetch))return!0;let e=!1;const t=ae.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=Nn(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){m&&f.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function Rf(e,t){const n="fetch";St(n,e),kt(n,()=>Lf(void 0,t))}function Lf(e,t=!1){t&&!Af()||M(y,"fetch",function(n){return function(...r){const i=new Error,{method:s,url:o}=Df(r),a={args:r,fetchData:{method:s,url:o},startTimestamp:Z()*1e3,virtualError:i,headers:Mf(r)};return H("fetch",{...a}),n.apply(y,r).then(async l=>(H("fetch",{...a,endTimestamp:Z()*1e3,response:l}),l),l=>{H("fetch",{...a,endTimestamp:Z()*1e3,error:l}),Ge(l)&&l.stack===void 0&&(l.stack=i.stack,ht(l,"framesToPop",1));const u=I()?.getOptions().enhanceFetchErrorMessages??"always";if(u!==!1&&l instanceof TypeError&&(l.message==="Failed to fetch"||l.message==="Load failed"||l.message==="NetworkError when attempting to fetch resource."))try{const d=new URL(a.fetchData.url).host;u==="always"?l.message=`${l.message} (${d})`:ht(l,"__sentry_fetch_url_host__",d)}catch{}throw l})}})}function Oe(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Yi(e){return typeof e=="string"?e:e?Oe(e,"url")?e.url:e.toString?e.toString():"":""}function Df(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:Yi(n),method:Oe(r,"method")?String(r.method).toUpperCase():co(n)&&Oe(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:Yi(t),method:Oe(t,"method")?String(t.method).toUpperCase():"GET"}}function Mf(e){const[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(co(t))return new Headers(t.headers)}catch{}}function Nf(){return"npm"}const S=y;let Bn=0;function zo(){return Bn>0}function Bf(){Bn++,setTimeout(()=>{Bn--})}function Nt(e,t={}){function n(i){return typeof i=="function"}if(!n(e))return e;try{const i=e.__sentry_wrapped__;if(i)return typeof i=="function"?i:e;if(wr(e))return e}catch{return e}const r=function(...i){try{const s=i.map(o=>Nt(o,t));return e.apply(this,s)}catch(s){throw Bf(),rd(o=>{o.addEventProcessor(a=>(t.mechanism&&(In(a,void 0),Lt(a,t.mechanism)),a.extra={...a.extra,arguments:i},a)),gh(s)}),s}};try{for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}catch{}po(r,e),ht(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function jf(){const e=gr(),{referrer:t}=S.document||{},{userAgent:n}=S.navigator||{},r={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:r}}function kr(e,t){const n=Tr(e,t),r={type:zf(t),value:Kf(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Ff(e,t,n,r){const s=I()?.getOptions().normalizeDepth,o=Xf(t),a={__serialized__:xo(t,s)};if(o)return{exception:{values:[kr(e,o)]},extra:a};const l={exception:{values:[{type:Ye(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Wf(t,{isUnhandledRejection:r})}]},extra:a};if(n){const c=Tr(e,n);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}function wn(e,t){return{exception:{values:[kr(e,t)]}}}function Tr(e,t){const n=t.stacktrace||t.stack||"",r=Uf(t),i=Hf(t);try{return e(n,r,i)}catch{}return[]}const $f=/Minified React error #\d+;/i;function Uf(e){return e&&$f.test(e.message)?1:0}function Hf(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function Ko(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function zf(e){const t=e?.name;return!t&&Ko(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function Kf(e){const t=e?.message;return Ko(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?Ui(t.error):Ui(e):"No error message"}function qf(e,t,n,r){const i=n?.syntheticException||void 0,s=Ir(e,t,i,r);return Lt(s),s.level="error",n?.event_id&&(s.event_id=n.event_id),Qe(s)}function Gf(e,t,n="info",r,i){const s=r?.syntheticException||void 0,o=jn(e,t,s,i);return o.level=n,r?.event_id&&(o.event_id=r.event_id),Qe(o)}function Ir(e,t,n,r,i){let s;if(ao(t)&&t.error)return wn(e,t.error);if(li(t)||Lp(t)){const o=t;if("stack"in t)s=wn(e,t);else{const a=o.name||(li(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;s=jn(e,l,n,r),In(s,l)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return Ge(t)?wn(e,t):se(t)||Ye(t)?(s=Ff(e,t,n,i),Lt(s,{synthetic:!0}),s):(s=jn(e,t,n,r),In(s,`${t}`),Lt(s,{synthetic:!0}),s)}function jn(e,t,n,r){const i={};if(r&&n){const s=Tr(e,n);s.length&&(i.exception={values:[{value:t,stacktrace:{frames:s}}]}),Lt(i,{synthetic:!0})}if(_r(t)){const{__sentry_template_string__:s,__sentry_template_values__:o}=t;return i.logentry={message:s,params:o},i}return i.message=t,i}function Wf(e,{isUnhandledRejection:t}){const n=$p(e),r=t?"promise rejection":"exception";return ao(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Ye(e)?`Event \`${Yf(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function Yf(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Xf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class Jf extends zh{constructor(t){const n=Zf(t),r=S.SENTRY_SDK_SOURCE||Nf();tf(n,"browser",["browser"],r),n._metadata?.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);const{sendDefaultPii:i,sendClientReports:s,enableLogs:o,_experiments:a,enableMetrics:l}=this._options,c=l??a?.enableMetrics??!0;S.document&&(s||o||c)&&S.document.addEventListener("visibilitychange",()=>{S.document.visibilityState==="hidden"&&(s&&this._flushOutcomes(),o&&Vo(this),c&&Ao(this))}),i&&this.on("beforeSendSession",Qh)}eventFromException(t,n){return qf(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return Gf(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,i){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,i)}}function Zf(e){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:S.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const Qf=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,V=y,tm=1e3;let Xi,Fn,$n;function em(e){St("dom",e),kt("dom",nm)}function nm(){if(!V.document)return;const e=H.bind(null,"dom"),t=Ji(e,!0);V.document.addEventListener("click",t,!1),V.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const i=V[n]?.prototype;i?.hasOwnProperty?.("addEventListener")&&(M(i,"addEventListener",function(s){return function(o,a,l){if(o==="click"||o=="keypress")try{const c=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},u=c[o]=c[o]||{refCount:0};if(!u.handler){const p=Ji(e);u.handler=p,s.call(this,o,p,l)}u.refCount++}catch{}return s.call(this,o,a,l)}}),M(i,"removeEventListener",function(s){return function(o,a,l){if(o==="click"||o=="keypress")try{const c=this.__sentry_instrumentation_handlers__||{},u=c[o];u&&(u.refCount--,u.refCount<=0&&(s.call(this,o,u.handler,l),u.handler=void 0,delete c[o]),Object.keys(c).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return s.call(this,o,a,l)}}))})}function rm(e){if(e.type!==Fn)return!1;try{if(!e.target||e.target._sentryId!==$n)return!1}catch{}return!0}function im(e,t){return e!=="keypress"?!1:t?.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function Ji(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=sm(n);if(im(n.type,r))return;ht(n,"_sentryCaptured",!0),r&&!r._sentryId&&ht(r,"_sentryId",$());const i=n.type==="keypress"?"input":n.type;rm(n)||(e({event:n,name:i,global:t}),Fn=n.type,$n=r?r._sentryId:void 0),clearTimeout(Xi),Xi=V.setTimeout(()=>{$n=void 0,Fn=void 0},tm)}}function sm(e){try{return e.target}catch{return null}}let xe;function qo(e){const t="history";St(t,e),kt(t,om)}function om(){if(V.addEventListener("popstate",()=>{const t=V.location.href,n=xe;if(xe=t,n===t)return;H("history",{from:n,to:t})}),!Vf())return;function e(t){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const i=xe,s=am(String(r));if(xe=s,i===s)return t.apply(this,n);H("history",{from:i,to:s})}return t.apply(this,n)}}M(V.history,"pushState",e),M(V.history,"replaceState",e)}function am(e){try{return new URL(e,V.location.origin).toString()}catch{return e}}const Ae={};function lm(e){const t=Ae[e];if(t)return t;let n=V[e];if(Nn(n))return Ae[e]=n.bind(V);const r=V.document;if(r&&typeof r.createElement=="function")try{const i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);const s=i.contentWindow;s?.[e]&&(n=s[e]),r.head.removeChild(i)}catch(i){Qf&&f.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,i)}return n&&(Ae[e]=n.bind(V))}function cm(e){Ae[e]=void 0}const Zt="__sentry_xhr_v3__";function um(e){St("xhr",e),kt("xhr",pm)}function pm(){if(!V.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){const i=new Error,s=Z()*1e3,o=J(r[0])?r[0].toUpperCase():void 0,a=dm(r[1]);if(!o||!a)return t.apply(n,r);n[Zt]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const l=()=>{const c=n[Zt];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}const u={endTimestamp:Z()*1e3,startTimestamp:s,xhr:n,virtualError:i};H("xhr",u)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,u,p){return l(),c.apply(u,p)}}):n.addEventListener("readystatechange",l),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,u,p){const[h,d]=p,w=u[Zt];return w&&J(h)&&J(d)&&(w.request_headers[h.toLowerCase()]=d),c.apply(u,p)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){const i=n[Zt];if(!i)return t.apply(n,r);r[0]!==void 0&&(i.body=r[0]);const s={startTimestamp:Z()*1e3,xhr:n};return H("xhr",s),t.apply(n,r)}})}function dm(e){if(J(e))return e;try{return e.toString()}catch{}}const hm=40;function fm(e,t=lm("fetch")){let n=0,r=0;async function i(s){const o=s.body.length;n+=o,r++;const a={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{const l=await t(e.url,a);return{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}}catch(l){throw cm("fetch"),l}finally{n-=o,r--}}return jh(e,i,Sr(e.bufferSize||hm))}const tn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,mm=30,vm=50;function Un(e,t,n,r){const i={filename:e,function:t==="<anonymous>"?Et:t,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const _m=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,bm=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,gm=/\((\S*)(?::(\d+))(?::(\d+))\)/,wm=/at (.+?) ?\(data:(.+?),/,ym=e=>{const t=e.match(wm);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const n=_m.exec(e);if(n){const[,i,s,o]=n;return Un(i,Et,+s,+o)}const r=bm.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){const a=gm.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}const[s,o]=Go(r[1]||Et,r[2]);return Un(o,s,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},Em=[mm,ym],Cm=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,xm=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Pm=e=>{const t=Cm.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const s=xm.exec(t[3]);s&&(t[1]=t[1]||"eval",t[3]=s[1],t[4]=s[2],t[5]="")}let r=t[3],i=t[1]||Et;return[i,r]=Go(i,r),Un(r,i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Sm=[vm,Pm],km=[Em,Sm],Tm=io(...km),Go=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:Et,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Pe=1024,Im="Breadcrumbs",Vm=((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Im,setup(n){t.console&&bf(Lm(n)),t.dom&&em(Rm(n,t.dom)),t.xhr&&um(Dm(n)),t.fetch&&Rf(Mm(n)),t.history&&qo(Nm(n)),t.sentry&&n.on("beforeSendEvent",Am(n))}}}),Om=Vm;function Am(e){return function(n){I()===e&&Ct({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:vt(n)},{event:n})}}function Rm(e,t){return function(r){if(I()!==e)return;let i,s,o=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>Pe&&(tn&&f.warn(`\`dom.maxStringLength\` cannot exceed ${Pe}, but a value of ${a} was configured. Sentry will use ${Pe} instead.`),a=Pe),typeof o=="string"&&(o=[o]);try{const c=r.event,u=Bm(c)?c.target:c;i=uo(u,{keyAttrs:o,maxStringLength:a}),s=Fp(u)}catch{i="<unknown>"}if(i.length===0)return;const l={category:`ui.${r.name}`,message:i};s&&(l.data={"ui.component_name":s}),Ct(l,{event:r.event,name:r.name,global:r.global})}}function Lm(e){return function(n){if(I()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:wf(n.level),message:pi(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${pi(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Ct(r,{input:n.args,level:n.level})}}function Dm(e){return function(n){if(I()!==e)return;const{startTimestamp:r,endTimestamp:i}=n,s=n.xhr[Zt];if(!r||!i||!s)return;const{method:o,url:a,status_code:l,body:c}=s,u={method:o,url:a,status_code:l},p={xhr:n.xhr,input:c,startTimestamp:r,endTimestamp:i},h={category:"xhr",data:u,type:"http",level:Ho(l)};e.emit("beforeOutgoingRequestBreadcrumb",h,p),Ct(h,p)}}function Mm(e){return function(n){if(I()!==e)return;const{startTimestamp:r,endTimestamp:i}=n;if(i&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const s=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:i},a={category:"fetch",data:s,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,o),Ct(a,o)}else{const s=n.response,o={...n.fetchData,status_code:s?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,s?.status;const a={input:n.args,response:s,startTimestamp:r,endTimestamp:i},l={category:"fetch",data:o,type:"http",level:Ho(o.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",l,a),Ct(l,a)}}}function Nm(e){return function(n){if(I()!==e)return;let r=n.from,i=n.to;const s=gn(S.location.href);let o=r?gn(r):void 0;const a=gn(i);o?.path||(o=s),s.protocol===a.protocol&&s.host===a.host&&(i=a.relative),s.protocol===o.protocol&&s.host===o.host&&(r=o.relative),Ct({category:"navigation",data:{from:r,to:i}})}}function Bm(e){return!!e&&!!e.target}const jm=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Fm="BrowserApiErrors",$m=((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:Fm,setupOnce(){t.setTimeout&&M(S,"setTimeout",Zi),t.setInterval&&M(S,"setInterval",Zi),t.requestAnimationFrame&&M(S,"requestAnimationFrame",Hm),t.XMLHttpRequest&&"XMLHttpRequest"in S&&M(XMLHttpRequest.prototype,"send",zm);const n=t.eventTarget;n&&(Array.isArray(n)?n:jm).forEach(i=>Km(i,t))}}}),Um=$m;function Zi(e){return function(...t){const n=t[0];return t[0]=Nt(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${pt(e)}`}}),e.apply(this,t)}}function Hm(e){return function(t){return e.apply(this,[Nt(t,{mechanism:{data:{handler:pt(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function zm(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&M(n,i,function(s){const o={mechanism:{data:{handler:pt(s)},handled:!1,type:`auto.browser.browserapierrors.xhr.${i}`}},a=wr(s);return a&&(o.mechanism.data.handler=pt(a)),Nt(s,o)})}),e.apply(this,t)}}function Km(e,t){const r=S[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(M(r,"addEventListener",function(i){return function(s,o,a){try{qm(o)&&(o.handleEvent=Nt(o.handleEvent,{mechanism:{data:{handler:pt(o),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&Gm(this,s,o),i.apply(this,[s,Nt(o,{mechanism:{data:{handler:pt(o),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),a])}}),M(r,"removeEventListener",function(i){return function(s,o,a){try{const l=o.__sentry_wrapped__;l&&i.call(this,s,l,a)}catch{}return i.call(this,s,o,a)}}))}function qm(e){return typeof e.handleEvent=="function"}function Gm(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}const Wm=()=>({name:"BrowserSession",setupOnce(){if(typeof S.document>"u"){tn&&f.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Oi({ignoreDuration:!0}),Ai(),qo(({from:e,to:t})=>{e!==void 0&&e!==t&&(Oi({ignoreDuration:!0}),Ai())})}}),Ym="GlobalHandlers",Xm=((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Ym,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(Zm(n),Qi("onerror")),t.onunhandledrejection&&(Qm(n),Qi("onunhandledrejection"))}}}),Jm=Xm;function Zm(e){Vp(t=>{const{stackParser:n,attachStacktrace:r}=Wo();if(I()!==e||zo())return;const{msg:i,url:s,line:o,column:a,error:l}=t,c=nv(Ir(n,l||i,void 0,r,!1),s,o,a);c.level="error",So(c,{originalException:l,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function Qm(e){Ap(t=>{const{stackParser:n,attachStacktrace:r}=Wo();if(I()!==e||zo())return;const i=tv(t),s=We(i)?ev(i):Ir(n,i,void 0,r,!0);s.level="error",So(s,{originalException:i,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function tv(e){if(We(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function ev(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function nv(e,t,n,r){const i=e.exception=e.exception||{},s=i.values=i.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=r,u=n,p=rv(t)??gr();return l.length===0&&l.push({colno:c,filename:p,function:Et,in_app:!0,lineno:u}),e}function Qi(e){tn&&f.log(`Global Handler attached: ${e}`)}function Wo(){return I()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function rv(e){if(!(!J(e)||e.length===0))return e.startsWith("data:")?`<${Zh(e,!1)}>`:e}const iv=()=>({name:"HttpContext",preprocessEvent(e){if(!S.navigator&&!S.location&&!S.document)return;const t=jf(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}}),sv="cause",ov=5,av="LinkedErrors",lv=((e={})=>{const t=e.limit||ov,n=e.key||sv;return{name:av,preprocessEvent(r,i,s){const o=s.getOptions();_f(kr,o.stackParser,n,t,r,i)}}}),cv=lv;function uv(){return pv()?(tn&&Ht(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function pv(){if(typeof S.window>"u")return!1;const e=S;if(e.nw||!(e.chrome||e.browser)?.runtime?.id)return!1;const n=gr(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(S===S.top&&r.some(s=>n.startsWith(`${s}://`)))}function dv(e){return[cf(),sf(),If(),Um(),Om(),Jm(),cv(),Cf(),iv(),Wm()]}function _v(e={}){const t=!e.skipBrowserExtensionCheck&&uv();let n=e.defaultIntegrations==null?dv():e.defaultIntegrations;const r={...e,enabled:t?!1:e.enabled,stackParser:Tp(e.stackParser||Tm),integrations:Sh({integrations:e.integrations,defaultIntegrations:n}),transport:e.transport||fm};return Xh(Jf,r)}export{vv as P,_v as a,fv as i,mv as s};
